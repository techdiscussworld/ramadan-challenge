<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ramadan Challenge 2026</title>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        .arabic-text {
            font-family: 'Amiri', serif;
            direction: rtl;
        }

        :root {
            --primary: #10b981;
            --primary-dark: #059669;
            --accent: #d4a574;
            --accent-light: #f4d03f;
            --bg-dark: #0a1628;
            --bg-darker: #0d2137;
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-strong: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.1);
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #0a1628 0%, #0d2137 25%, #0f2d4a 50%, #0a3d3d 75%, #0a1628 100%);
            background-attachment: fixed;
            color: white;
            min-height: 100vh;
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Glassmorphism */
        .glass {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .glass-strong {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(30px);
            -webkit-backdrop-filter: blur(30px);
            border: 1px solid rgba(255, 255, 255, 0.15);
        }

        /* Gold gradient text */
        .gold-gradient {
            background: linear-gradient(135deg, #d4a574 0%, #f4d03f 50%, #d4a574 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Glows */
        .emerald-glow {
            box-shadow: 0 0 40px rgba(16, 185, 129, 0.2);
        }

        .gold-glow {
            box-shadow: 0 0 30px rgba(212, 165, 116, 0.3);
        }

        /* Stars background */
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .star {
            position: absolute;
            width: 3px;
            height: 3px;
            background: white;
            border-radius: 50%;
            opacity: 0.5;
            animation: twinkle 4s ease-in-out infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }

        /* Floating animation */
        .animate-float {
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        .animate-pulse-slow {
            animation: pulse-slow 3s ease-in-out infinite;
        }

        @keyframes pulse-slow {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        /* Header */
        .header {
            text-align: center;
            padding: 30px 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(30px);
            -webkit-backdrop-filter: blur(30px);
            color: white;
            border-radius: 20px;
            margin-bottom: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.15);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 150px;
            height: 150px;
            background: radial-gradient(circle, rgba(16, 185, 129, 0.2), transparent);
            border-radius: 50%;
            filter: blur(40px);
        }

        .header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 120px;
            height: 120px;
            background: radial-gradient(circle, rgba(212, 165, 116, 0.2), transparent);
            border-radius: 50%;
            filter: blur(40px);
        }

        .header h1 {
            font-size: 32px;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }

        .greeting {
            font-size: 16px;
            color: rgba(16, 185, 129, 0.8);
            margin-bottom: 10px;
        }

        .stage-info {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.7);
        }

        /* Login Form */
        .login-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(30px);
            -webkit-backdrop-filter: blur(30px);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 8px 40px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.15);
            margin-top: 40px;
            position: relative;
        }

        .login-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 150px;
            height: 150px;
            background: radial-gradient(circle, rgba(16, 185, 129, 0.2), transparent);
            border-radius: 50%;
            filter: blur(60px);
        }

        .login-card h2 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 28px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: rgba(16, 185, 129, 0.8);
            font-size: 14px;
            font-weight: 500;
        }

        .form-group input {
            width: 100%;
            padding: 14px 16px;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(16, 185, 129, 0.3);
            color: white;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .form-group input:focus {
            outline: none;
            border-color: rgba(16, 185, 129, 0.6);
            background: rgba(255, 255, 255, 0.08);
        }

        .form-group input::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        /* Stats */
        .stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            padding: 20px;
            border-radius: 16px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(16, 185, 129, 0.3);
        }

        .stat-card .value {
            font-size: 32px;
            font-weight: 700;
            background: linear-gradient(135deg, #10b981, #f4d03f);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 5px;
        }

        .stat-card .label {
            font-size: 12px;
            color: rgba(16, 185, 129, 0.8);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Progress Bar */
        .progress-section {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            padding: 20px;
            border-radius: 16px;
            margin-bottom: 25px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 14px;
            color: rgba(16, 185, 129, 0.8);
        }

        .progress-bar {
            height: 12px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #10b981, #f4d03f);
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        /* Tasks Card */
        .tasks-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(30px);
            -webkit-backdrop-filter: blur(30px);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 8px 40px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.15);
            margin-bottom: 25px;
        }

        .tasks-card h3 {
            font-size: 20px;
            margin-bottom: 20px;
            color: white;
        }

        .day-badge {
            display: inline-block;
            background: linear-gradient(135deg, rgba(212, 165, 116, 0.2), rgba(244, 208, 63, 0.1));
            border: 1px solid rgba(212, 165, 116, 0.3);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            color: #f4d03f;
            margin-right: 10px;
        }

        /* Task Item */
        .task-item {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            padding: 16px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .task-item:hover {
            transform: translateX(5px);
            border-color: rgba(16, 185, 129, 0.5);
            background: rgba(255, 255, 255, 0.08);
        }

        .task-item.completed {
            opacity: 0.7;
            background: rgba(16, 185, 129, 0.1);
        }

        .task-checkbox {
            width: 24px;
            height: 24px;
            min-width: 24px;
            border: 2px solid rgba(16, 185, 129, 0.5);
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.05);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .task-checkbox.checked {
            background: linear-gradient(135deg, #10b981, #059669);
            border-color: #10b981;
        }

        .task-checkbox.checked::after {
            content: '‚úì';
            color: white;
            font-weight: bold;
            font-size: 14px;
        }

        .task-content {
            flex: 1;
            min-width: 0;
        }

        .task-title {
            font-size: 15px;
            font-weight: 500;
            color: white;
            margin-bottom: 8px;
            line-height: 1.4;
        }

        .task-ayah {
            font-size: 16px;
            line-height: 1.8;
            color: rgba(212, 165, 116, 0.9);
            font-family: 'Amiri', serif;
            direction: rtl;
            text-align: right;
            padding: 12px;
            background: rgba(212, 165, 116, 0.1);
            border-radius: 8px;
            border-right: 3px solid rgba(212, 165, 116, 0.5);
        }

        .task-points {
            font-size: 14px;
            font-weight: 600;
            color: #f4d03f;
            white-space: nowrap;
        }

        /* Buttons */
        .btn {
            padding: 14px 28px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            color: white;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .submit-btn {
            width: 100%;
            background: linear-gradient(135deg, #d4a574 0%, #f4d03f 50%, #d4a574 100%);
            color: #0a1628;
            font-size: 18px;
            padding: 16px;
            margin-top: 20px;
        }

        .submit-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(212, 165, 116, 0.4);
        }

        .logout-btn {
            background: rgba(255, 255, 255, 0.1) !important;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 10px 20px;
            font-size: 14px;
            margin-top: 15px;
        }

        .logout-btn:hover {
            background: rgba(239, 68, 68, 0.3) !important;
            border-color: rgba(239, 68, 68, 0.5);
        }

        /* Language Toggle Switch */
        .language-toggle {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 4px;
            border-radius: 25px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .language-toggle .lang-option {
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            color: rgba(255, 255, 255, 0.6);
        }

        .language-toggle .lang-option.active {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            box-shadow: 0 2px 8px rgba(16, 185, 129, 0.4);
        }

        .language-toggle .lang-option:hover:not(.active) {
            color: white;
            background: rgba(255, 255, 255, 0.1);
        }

        /* Streak Badge */
        .streak-badge {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: linear-gradient(135deg, #10b981, #059669);
            padding: 12px 20px;
            border-radius: 50px;
            box-shadow: 0 8px 30px rgba(16, 185, 129, 0.4);
            display: flex;
            align-items: center;
            gap: 8px;
            z-index: 100;
            animation: pulse-slow 3s ease-in-out infinite;
        }

        .streak-badge .icon {
            font-size: 24px;
        }

        .streak-badge .text {
            font-weight: 600;
            font-size: 14px;
        }

        /* Completion Card */
        .completion-card {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.2), rgba(244, 208, 63, 0.1));
            border: 1px solid rgba(16, 185, 129, 0.3);
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            margin-bottom: 20px;
        }

        .completion-card h2 {
            font-size: 28px;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #10b981, #f4d03f);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Challenge Complete */
        .challenge-complete {
            background: linear-gradient(135deg, rgba(212, 165, 116, 0.3), rgba(16, 185, 129, 0.2));
            color: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 8px 40px rgba(212, 165, 116, 0.4);
            border: 1px solid rgba(212, 165, 116, 0.5);
        }

        .challenge-complete h2 {
            font-size: 32px;
            margin-bottom: 15px;
        }

        .challenge-complete .final-score {
            font-size: 56px;
            font-weight: 700;
            background: linear-gradient(135deg, #d4a574, #f4d03f);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 20px 0;
        }

        /* Testing Navigation */
        .testing-nav {
            background: rgba(239, 68, 68, 0.2);
            border: 1px solid rgba(239, 68, 68, 0.5);
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .testing-nav .btn {
            background: rgba(239, 68, 68, 0.8);
            font-size: 14px;
            padding: 10px 16px;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .header .greeting {
            font-size: 18px;
            opacity: 0.95;
            margin-bottom: 15px;
        }

        .header .stage-info {
            font-size: 14px;
            opacity: 0.9;
            margin-top: 10px;
            padding-top: 15px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* Login Form */
        /* Task Modal Popup */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(10, 22, 40, 0.95);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
            animation: fadeIn 0.2s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: rgba(13, 33, 55, 0.95);
            backdrop-filter: blur(30px);
            -webkit-backdrop-filter: blur(30px);
            border: 1px solid rgba(16, 185, 129, 0.3);
            border-radius: 24px;
            max-width: 600px;
            width: 100%;
            max-height: 85vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.7);
            animation: slideUp 0.3s ease;
            position: relative;
        }

        @keyframes slideUp {
            from { 
                opacity: 0;
                transform: translateY(30px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            padding: 25px 25px 20px 25px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .modal-close:hover {
            background: rgba(16, 185, 129, 0.3);
            transform: rotate(90deg);
        }

        .modal-title {
            font-size: 18px;
            color: white;
            font-weight: 600;
            padding-right: 50px;
            line-height: 1.4;
        }

        .modal-body {
            padding: 25px;
        }

        .modal-arabic {
            font-size: 28px;
            line-height: 2;
            text-align: right;
            direction: rtl;
            color: #f4d03f;
            margin-bottom: 20px;
            padding: 24px;
            background: linear-gradient(135deg, rgba(212, 165, 116, 0.15), rgba(244, 208, 63, 0.1));
            border-radius: 16px;
            border-right: 4px solid rgba(212, 165, 116, 0.5);
            font-family: 'Amiri', serif;
            box-shadow: 0 4px 20px rgba(212, 165, 116, 0.2);
        }

        .modal-translation {
            font-size: 16px;
            line-height: 1.8;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 25px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            border-left: 3px solid rgba(16, 185, 129, 0.5);
        }

        .modal-checkbox-container {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 20px;
            background: var(--bg);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .modal-checkbox-container:hover {
            background: linear-gradient(135deg, var(--accent) 0%, #c09020 100%);
        }

        .modal-checkbox {
            width: 28px;
            height: 28px;
            min-width: 28px;
            border: 3px solid var(--border);
            border-radius: 8px;
            position: relative;
            transition: all 0.2s ease;
        }

        .modal-checkbox.checked {
            background: var(--success);
            border-color: var(--success);
        }

        .modal-checkbox.checked::after {
            content: '‚úì';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-weight: bold;
            font-size: 18px;
        }

        .modal-checkbox-label {
            font-size: 16px;
            font-weight: 500;
            color: var(--text);
        }

        .modal-points-badge {
            background: linear-gradient(135deg, var(--accent) 0%, #c09020 100%);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            display: inline-block;
            margin-top: 15px;
        }

        /* Responsive */
        @media (max-width: 600px) {
            .container {
                padding: 15px;
            }

            .header h1 {
                font-size: 24px;
            }

            .stats {
                grid-template-columns: repeat(3, 1fr);
                gap: 10px;
            }

            .stat-card {
                padding: 15px 10px;
            }

            .stat-card .value {
                font-size: 24px;
            }

            .login-card {
                padding: 25px;
            }

            .modal-content {
                max-height: 90vh;
            }

            .modal-arabic {
                font-size: 24px;
                padding: 15px;
            }

            .modal-translation {
                font-size: 15px;
            }

            .modal-header {
                padding: 20px 20px 15px 20px;
            }

            .modal-body {
                padding: 20px;
            }
        }

        .hidden {
            display: none !important;
        }

        /* Loading State */
        .loading {
            text-align: center;
            padding: 40px;
            color: var(--text-light);
        }
    </style>
</head>
<body>
    <!-- Animated Stars Background -->
    <div class="stars" id="starsContainer"></div>
    
    <div class="container">
        <!-- Login Screen -->
        <div id="loginScreen">
            <div class="header">
                <!-- Animated Crescent Moon -->
                <div style="display: flex; justify-content: center; margin-bottom: 20px;">
                    <svg class="animate-float" width="80" height="80" viewBox="0 0 100 100" fill="#f4d03f">
                        <path d="M50 10C30 10 15 30 15 50s15 40 35 40c-15-10-20-25-20-40s5-30 20-40z" />
                        <circle cx="70" cy="25" r="3" class="animate-pulse-slow" fill="#f4d03f" />
                        <circle cx="80" cy="40" r="2" class="animate-pulse-slow" fill="#f4d03f" style="animation-delay: 0.5s" />
                        <circle cx="75" cy="55" r="2.5" class="animate-pulse-slow" fill="#f4d03f" style="animation-delay: 1s" />
                    </svg>
                </div>
                <h1 class="gold-gradient" style="font-size: 36px; margin-bottom: 10px;">Ramadan Challenge 2026</h1>
                <p style="color: rgba(16, 185, 129, 0.8); font-size: 16px;">‡§Ü‡§á‡§Ø‡•á ‡§á‡§∏ ‡§∞‡§Æ‡§ú‡§æ‡§® ‡§Ö‡§≤‡•ç‡§≤‡§æ‡§π ‡§ï‡•Ä ‡§π‡§ø‡§¶‡§æ‡§Ø‡§§ ‡§ï‡•ã ‡§Ö‡§™‡§®‡•Ä ‡•õ‡§ø‡§®‡•ç‡§¶‡§ó‡•Ä ‡§Æ‡•á‡§Ç ‡§≤‡§æ‡§®‡•á ‡§ï‡•Ä ‡§ï‡•ã‡§∂‡§ø‡§∂ ‡§ï‡§∞‡§§‡•á ‡§π‡•à!</p>
            </div>
            
            <div class="login-card">
                <h2 class="gold-gradient" style="font-size: 28px;">Welcome! Let's Begin</h2>
                <p style="text-align: center; color: rgba(255, 255, 255, 0.6); margin-bottom: 25px; font-size: 14px;">Begin your journey of spiritual growth</p>
                <form id="loginForm">
                    <div class="form-group">
                        <label for="userName">Your Name</label>
                        <input type="text" id="userName" required placeholder="Enter your name">
                    </div>
                    <div class="form-group">
                        <label for="userMobile">Mobile Number</label>
                        <input type="tel" id="userMobile" required maxlength="10" pattern="[0-9]{10}" placeholder="Enter 10-digit mobile number">
                    </div>
                    <button type="submit" class="btn submit-btn" style="margin-top: 10px;">
                        <span>Start My Journey</span>
                        <span style="margin-left: 8px;">‚Üí</span>
                    </button>
                </form>
            </div>
        </div>

        <!-- Main App -->
        <div id="appScreen" class="hidden">
            <div class="header">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                    <div style="display: flex; align-items: center; gap: 12px; flex: 1;">
                        <!-- Animated Crescent Moon -->
                        <svg class="animate-float" width="40" height="40" viewBox="0 0 100 100" fill="#f4d03f">
                            <path d="M50 10C30 10 15 30 15 50s15 40 35 40c-15-10-20-25-20-40s5-30 20-40z" />
                            <circle cx="70" cy="25" r="3" class="animate-pulse-slow" fill="#f4d03f" />
                            <circle cx="80" cy="40" r="2" class="animate-pulse-slow" fill="#f4d03f" style="animation-delay: 0.5s" />
                            <circle cx="75" cy="55" r="2.5" class="animate-pulse-slow" fill="#f4d03f" style="animation-delay: 1s" />
                        </svg>
                        <h1 class="gold-gradient" style="margin: 0; font-size: 28px;">
                            <span class="lang-text" data-en="Ramadan Challenge" data-hi="‡§∞‡§Æ‡§ú‡§º‡§æ‡§® ‡§ö‡•à‡§≤‡•á‡§Ç‡§ú">Ramadan Challenge</span>
                        </h1>
                    </div>
                    <div class="language-toggle">
                        <div class="lang-option active" id="lang-en" onclick="setLanguage('en')">EN</div>
                        <div class="lang-option" id="lang-hi" onclick="setLanguage('hi')">‡§π‡§ø‡§Ç</div>
                    </div>
                </div>
                <p class="greeting"><span class="lang-text" data-en="Assalamu Alaikum" data-hi="‡§Ö‡§∏‡•ç‡§∏‡§≤‡§æ‡§Æ‡•Å ‡§Ö‡§≤‡•à‡§ï‡•Å‡§Æ">Assalamu Alaikum</span>, <span id="userNameDisplay"></span>!</p>
                <div class="stage-info">
                    <div id="stageTitle"></div>
                </div>
                <button class="btn logout-btn" onclick="logout()">Logout</button>
            </div>

            <!-- Stats -->
            <div class="stats">
                <div class="stat-card">
                    <div class="value" id="totalPoints">0</div>
                    <div class="label lang-text" data-en="Total Points" data-hi="‡§ï‡•Å‡§≤ ‡§Ö‡§Ç‡§ï">Total Points</div>
                </div>
                <div class="stat-card">
                    <div class="value" id="currentDay">1</div>
                    <div class="label lang-text" data-en="Day" data-hi="‡§¶‡§ø‡§®">Day</div>
                </div>
                <div class="stat-card">
                    <div class="value" id="streakCount">0</div>
                    <div class="label lang-text" data-en="Streak" data-hi="‡§∏‡§ø‡§≤‡§∏‡§ø‡§≤‡§æ">Streak</div>
                </div>
            </div>

            <!-- Progress -->
            <div class="progress-section">
                <div class="progress-label">
                    <span class="lang-text" data-en="Challenge Progress" data-hi="‡§ö‡•à‡§≤‡•á‡§Ç‡§ú ‡§ï‡•Ä ‡§™‡•ç‡§∞‡§ó‡§§‡§ø">Challenge Progress</span>
                    <span id="progressPercent">0%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
            </div>

            <!-- Testing Navigation (only visible in testing mode) -->
            <div id="testingNav" class="testing-nav hidden">
                <div style="background: #ff6b35; color: white; padding: 15px; border-radius: 12px; text-align: center; margin-bottom: 20px;">
                    <strong>üß™ TESTING MODE</strong>
                    <p style="font-size: 13px; margin-top: 5px; opacity: 0.9;">Navigate through all 30 days to test the app</p>
                </div>
                <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                    <button class="btn" onclick="previousDay()" style="flex: 1; background: #666;">
                        ‚Üê Previous Day
                    </button>
                    <button class="btn" onclick="nextDay()" style="flex: 1;">
                        Next Day ‚Üí
                    </button>
                </div>
                <div style="display: flex; gap: 10px;">
                    <button class="btn" onclick="resetProgress()" style="flex: 1; background: #d32f2f; font-size: 14px;">
                        üîÑ Reset All Progress
                    </button>
                    <button class="btn" onclick="skipToDay()" style="flex: 1; background: #f57c00; font-size: 14px;">
                        ‚è≠Ô∏è Jump to Day...
                    </button>
                </div>
            </div>

            <!-- Streak Badge -->
            <div id="streakBadge" class="streak-badge hidden">
                <div class="icon">üî•</div>
                <div class="text"></div>
            </div>

            <!-- Day Completion Message -->
            <div id="completionMessage" class="completion-card hidden">
                <h2><span class="lang-text" data-en="‚ú® Alhamdulillah!" data-hi="‚ú® ‡§Ö‡§≤‡§π‡§Æ‡•ç‡§¶‡•Å‡§≤‡§ø‡§≤‡•ç‡§≤‡§æ‡§π!">‚ú® Alhamdulillah!</span></h2>
                <p><span class="lang-text" data-en="You've completed today's tasks!" data-hi="‡§Ü‡§™‡§®‡•á ‡§Ü‡§ú ‡§ï‡•á ‡§ï‡§æ‡§Æ ‡§™‡•Ç‡§∞‡•á ‡§ï‡§∞ ‡§≤‡§ø‡§è!">You've completed today's tasks!</span></p>
            </div>

            <!-- Challenge Complete -->
            <div id="challengeComplete" class="challenge-complete hidden">
                <h2><span class="lang-text" data-en="üéâ Challenge Complete!" data-hi="üéâ ‡§ö‡•à‡§≤‡•á‡§Ç‡§ú ‡§™‡•Ç‡§∞‡§æ ‡§π‡•Å‡§Ü!">üéâ Challenge Complete!</span></h2>
                <p><span class="lang-text" data-en="Congratulations on completing the 30-day Ramadan Challenge!" data-hi="‡§∞‡§Æ‡§ú‡§º‡§æ‡§® ‡§ï‡•á 30 ‡§¶‡§ø‡§® ‡§ï‡•á ‡§ö‡•à‡§≤‡•á‡§Ç‡§ú ‡§ï‡•ã ‡§™‡•Ç‡§∞‡§æ ‡§ï‡§∞‡§®‡•á ‡§™‡§∞ ‡§Æ‡•Å‡§¨‡§æ‡§∞‡§ï‡§¨‡§æ‡§¶!">Congratulations on completing the 30-day Ramadan Challenge!</span></p>
                <div class="final-score" id="finalScore">0</div>
                <p><span class="lang-text" data-en="May Allah accept your efforts!" data-hi="‡§Ö‡§≤‡•ç‡§≤‡§æ‡§π ‡§Ü‡§™‡§ï‡•Ä ‡§ï‡•ã‡§∂‡§ø‡§∂ ‡§ï‡§¨‡•Ç‡§≤ ‡§ï‡§∞‡•á‡§Ç!">May Allah accept your efforts!</span></p>
            </div>

            <!-- Tasks -->
            <div id="tasksContainer" class="tasks-card">
                <h3>
                    <span class="day-badge"><span class="lang-text" data-en="Day" data-hi="‡§¶‡§ø‡§®">Day</span> <span id="dayNumber">1</span></span>
                    <span class="lang-text" data-en="Today's Tasks" data-hi="‡§Ü‡§ú ‡§ï‡•á ‡§ï‡§æ‡§Æ">Today's Tasks</span>
                </h3>
                <div id="tasksList"></div>
                
                <div class="submit-section">
                    <button class="btn submit-btn" id="submitBtn" onclick="submitTasks()">
                        <span class="lang-text" data-en="Submit Today's Progress" data-hi="‡§Ü‡§ú ‡§ï‡•Ä ‡§™‡•ç‡§∞‡§ó‡§§‡§ø ‡§ú‡§Æ‡§æ ‡§ï‡§∞‡•á‡§Ç">Submit Today's Progress</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Task Detail Modal -->
        <div id="taskModal" class="modal-overlay hidden" onclick="closeModal(event)">
            <div class="modal-content" onclick="event.stopPropagation()">
                <div class="modal-header">
                    <button class="modal-close" onclick="closeModal()">&times;</button>
                    <div class="modal-title" id="modalTaskTitle"></div>
                </div>
                <div class="modal-body">
                    <div class="modal-arabic" id="modalArabic"></div>
                    <div class="modal-translation" id="modalTranslation"></div>
                    <div class="modal-checkbox-container" onclick="toggleModalCheckbox()">
                        <div class="modal-checkbox" id="modalCheckbox"></div>
                        <div class="modal-checkbox-label lang-text" data-en="Mark as complete" data-hi="‡§™‡•Ç‡§∞‡§æ ‡§π‡•Å‡§Ü">Mark as complete</div>
                    </div>
                    <div class="modal-points-badge" id="modalPoints"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Configuration
        const SHEET_URL = 'https://script.google.com/macros/s/AKfycbyx6hVbKdMneu5ipgAjXYbB83JVJmF_8m0Yb0--3wmcisE4P_yQs_THGGl_vw12IFAShw/exec'; // Replace with your Google Apps Script URL
        
        // TESTING MODE - Set to false for production
        const TESTING_MODE = true; // Shows navigation buttons to test all 30 days
        const TESTING_START_DATE = new Date(); // Today is Day 1 for testing

        // Stage definitions
        const STAGES = [
            { name: "Intention & Discipline", days: [1, 2, 3, 4, 5] },
            { name: "Self Control", days: [6, 7, 8, 9, 10] },
            { name: "Character Refinement", days: [11, 12, 13, 14, 15] },
            { name: "Inner Purification", days: [16, 17, 18, 19, 20] },
            { name: "Ihsan & Excellence", days: [21, 22, 23, 24, 25] },
            { name: "Transformation & Continuity", days: [26, 27, 28, 29, 30] }
        ];

        // Language translations (Indian spoken Urdu in Hindi script)
        let currentLanguage = 'en'; // 'en' or 'hi'
        
        const TRANSLATIONS = {
            // UI Elements
            'Ramadan Challenge': '‡§∞‡§Æ‡§ú‡§º‡§æ‡§® ‡§ö‡•à‡§≤‡•á‡§Ç‡§ú',
            'Assalamu Alaikum': '‡§Ö‡§∏‡•ç‡§∏‡§≤‡§æ‡§Æ‡•Å ‡§Ö‡§≤‡•à‡§ï‡•Å‡§Æ',
            'Total Points': '‡§ï‡•Å‡§≤ ‡§Ö‡§Ç‡§ï',
            'Day': '‡§¶‡§ø‡§®',
            'Streak': '‡§∏‡§ø‡§≤‡§∏‡§ø‡§≤‡§æ',
            'Challenge Progress': '‡§ö‡•à‡§≤‡•á‡§Ç‡§ú ‡§ï‡•Ä ‡§™‡•ç‡§∞‡§ó‡§§‡§ø',
            'Today\'s Tasks': '‡§Ü‡§ú ‡§ï‡•á ‡§ï‡§æ‡§Æ',
            'Submit Today\'s Progress': '‡§Ü‡§ú ‡§ï‡•Ä ‡§™‡•ç‡§∞‡§ó‡§§‡§ø ‡§ú‡§Æ‡§æ ‡§ï‡§∞‡•á‡§Ç',
            'Previous Day': '‡§™‡§ø‡§õ‡§≤‡§æ ‡§¶‡§ø‡§®',
            'Next Day': '‡§Ö‡§ó‡§≤‡§æ ‡§¶‡§ø‡§®',
            'Reset All Progress': '‡§∏‡§¨ ‡§∞‡•Ä‡§∏‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç',
            'Jump to Day...': '‡§¶‡§ø‡§® ‡§™‡§∞ ‡§ú‡§æ‡§è‡§Ç...',
            'Mark as complete': '‡§™‡•Ç‡§∞‡§æ ‡§π‡•Å‡§Ü',
            'Alhamdulillah!': '‡§Ö‡§≤‡§π‡§Æ‡•ç‡§¶‡•Å‡§≤‡§ø‡§≤‡•ç‡§≤‡§æ‡§π!',
            'You\'ve completed today\'s tasks!': '‡§Ü‡§™‡§®‡•á ‡§Ü‡§ú ‡§ï‡•á ‡§ï‡§æ‡§Æ ‡§™‡•Ç‡§∞‡•á ‡§ï‡§∞ ‡§≤‡§ø‡§è!',
            'Challenge Complete!': '‡§ö‡•à‡§≤‡•á‡§Ç‡§ú ‡§™‡•Ç‡§∞‡§æ ‡§π‡•Å‡§Ü!',
            'Congratulations on completing the 30-day Ramadan Challenge!': '‡§∞‡§Æ‡§ú‡§º‡§æ‡§® ‡§ï‡•á 30 ‡§¶‡§ø‡§® ‡§ï‡•á ‡§ö‡•à‡§≤‡•á‡§Ç‡§ú ‡§ï‡•ã ‡§™‡•Ç‡§∞‡§æ ‡§ï‡§∞‡§®‡•á ‡§™‡§∞ ‡§Æ‡•Å‡§¨‡§æ‡§∞‡§ï‡§¨‡§æ‡§¶!',
            'May Allah accept your efforts!': '‡§Ö‡§≤‡•ç‡§≤‡§æ‡§π ‡§Ü‡§™‡§ï‡•Ä ‡§ï‡•ã‡§∂‡§ø‡§∂ ‡§ï‡§¨‡•Ç‡§≤ ‡§ï‡§∞‡•á‡§Ç!',
            'Logout': '‡§≤‡•â‡§ó‡§Ü‡§â‡§ü',
            
            // Stage names
            'Intention & Discipline': '‡§®‡•Ä‡§Ø‡§§ ‡§î‡§∞ ‡§Ö‡§®‡•Å‡§∂‡§æ‡§∏‡§®',
            'Self Control': '‡§Ü‡§§‡•ç‡§Æ-‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§£',
            'Character Refinement': '‡§Ö‡§ñ‡§º‡§≤‡§æ‡§ï‡§º ‡§ï‡•Ä ‡§§‡§∞‡§¨‡§ø‡§Ø‡§§',
            'Inner Purification': '‡§¨‡§æ‡§§‡§ø‡§®‡•Ä ‡§§‡§ú‡§º‡§ï‡§ø‡§Ø‡§æ',
            'Ihsan & Excellence': '‡§è‡§π‡§∏‡§æ‡§® ‡§î‡§∞ ‡§â‡§§‡•ç‡§ï‡•É‡§∑‡•ç‡§ü‡§§‡§æ',
            'Transformation & Continuity': '‡§§‡§¨‡•ç‡§¶‡•Ä‡§≤‡•Ä ‡§î‡§∞ ‡§á‡§∏‡•ç‡§§‡§ø‡§ï‡§æ‡§Æ‡§§',
            
            // Task titles - All stages finalized
            // Stage 1
            'Prayed on time': '‡§µ‡§ï‡•ç‡§§ ‡§™‡§∞ ‡§®‡§Æ‡§æ‡§ú‡§º ‡§™‡§¢‡§º‡•Ä',
            'Said Bismillah before eating': '‡§ñ‡§æ‡§®‡•á ‡§∏‡•á ‡§™‡§π‡§≤‡•á ‡§¨‡§ø‡§∏‡•ç‡§Æ‡§ø‡§≤‡•ç‡§≤‡§æ‡§π ‡§ï‡§π‡§æ',
            'Removed an obstacle from the path': '‡§∞‡§æ‡§∏‡•ç‡§§‡•á ‡§∏‡•á ‡§∞‡•Å‡§ï‡§æ‡§µ‡§ü ‡§π‡§ü‡§æ‡§à',
            'Practiced gratitude (listed 3 blessings)': '‡§∂‡•Å‡§ï‡•ç‡§∞ ‡§Ö‡§¶‡§æ ‡§ï‡§ø‡§Ø‡§æ (3 ‡§®‡•á‡§Ö‡§Æ‡§§‡•á‡§Ç ‡§≤‡§ø‡§ñ‡•Ä‡§Ç)',
            
            // Stage 2
            'Learned the translation of Surah Al-Fatiha and reflected on its meaning': '‡§∏‡•Ç‡§∞‡§π ‡§Ö‡§≤-‡§´‡§º‡§æ‡§§‡§ø‡§π‡§æ ‡§ï‡§æ ‡§§‡§∞‡•ç‡§ú‡•Å‡§Æ‡§æ ‡§∏‡•Ä‡§ñ‡§æ ‡§î‡§∞ ‡§â‡§∏‡§ï‡•á ‡§Æ‡§Ö‡§®‡•Ä ‡§™‡§∞ ‡§ó‡§º‡•å‡§∞ ‡§ï‡§ø‡§Ø‡§æ',
            'Said Alhamdulillah for a blessing': '‡§ï‡§ø‡§∏‡•Ä ‡§®‡•á‡§Ö‡§Æ‡§§ ‡§™‡§∞ ‡§Ö‡§≤‡§π‡§Æ‡•ç‡§¶‡•Å‡§≤‡§ø‡§≤‡•ç‡§≤‡§æ‡§π ‡§ï‡§π‡§æ',
            'Controlled anger in a difficult situation': '‡§Æ‡•Å‡§∂‡•ç‡§ï‡§ø‡§≤ ‡§π‡§æ‡§≤‡§æ‡§§ ‡§Æ‡•á‡§Ç ‡§ó‡§º‡•Å‡§∏‡•ç‡§∏‡•á ‡§™‡§∞ ‡§ï‡§æ‡§¨‡•Ç ‡§∞‡§ñ‡§æ',
            'Avoided gossip and backbiting': '‡§ó‡§º‡•Ä‡§¨‡§§ ‡§î‡§∞ ‡§¨‡§¶‡§ó‡•ã‡§à ‡§∏‡•á ‡§¨‡§ö‡•á',
            
            // Stage 3
            'Prayed Tahajjud': '‡§§‡§π‡§ú‡•ç‡§ú‡•Å‡§¶ ‡§™‡§¢‡§º‡•Ä',
            'Did one good deed quietly': '‡§ö‡•Å‡§™‡§ö‡§æ‡§™ ‡§è‡§ï ‡§®‡•á‡§ï ‡§ï‡§æ‡§Æ ‡§ï‡§ø‡§Ø‡§æ',
            'Performed an act of kindness for someone': '‡§ï‡§ø‡§∏‡•Ä ‡§ï‡•á ‡§∏‡§æ‡§• ‡§®‡•á‡§ï‡•Ä ‡§ï‡§æ ‡§ï‡§æ‡§Æ ‡§ï‡§ø‡§Ø‡§æ',
            'Spoke kind words to family members': '‡§ò‡§∞ ‡§µ‡§æ‡§≤‡•ã‡§Ç ‡§∏‡•á ‡§Ö‡§ö‡•ç‡§õ‡•á ‡§≤‡§´‡§º‡•ç‡§ú‡§º‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§¨‡§æ‡§§ ‡§ï‡•Ä',
            
            // Stage 4
            'Reflected on Fatiha and concentrated on it while praying': '‡§´‡§º‡§æ‡§§‡§ø‡§π‡§æ ‡§™‡§∞ ‡§ó‡§º‡•å‡§∞ ‡§ï‡§ø‡§Ø‡§æ ‡§î‡§∞ ‡§®‡§Æ‡§æ‡§ú‡§º ‡§Æ‡•á‡§Ç ‡§â‡§∏ ‡§™‡§∞ ‡§§‡§µ‡§ú‡•ç‡§ú‡•ã ‡§¶‡•Ä',
            'Pondered on the things Allah created in the world and said SubhanAllah': '‡§Ö‡§≤‡•ç‡§≤‡§æ‡§π ‡§ï‡•Ä ‡§¨‡§®‡§æ‡§à ‡§ö‡•Ä‡§ú‡§º‡•ã‡§Ç ‡§™‡§∞ ‡§ó‡§º‡•å‡§∞ ‡§ï‡§ø‡§Ø‡§æ ‡§î‡§∞ ‡§∏‡•Å‡§¨‡§π‡§æ‡§®‡§Ö‡§≤‡•ç‡§≤‡§æ‡§π ‡§ï‡§π‡§æ',
            'Made sincere dua for someone else': '‡§ï‡§ø‡§∏‡•Ä ‡§î‡§∞ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§¶‡§ø‡§≤ ‡§∏‡•á ‡§¶‡•Å‡§Ü ‡§ï‡•Ä',
            'Reflected on personal shortcomings in journal': '‡§Ö‡§™‡§®‡•Ä ‡§ï‡§Æ‡§ø‡§Ø‡•ã‡§Ç ‡§™‡§∞ ‡§ó‡§º‡•å‡§∞ ‡§ï‡§ø‡§Ø‡§æ',
            
            // Stage 5
            'Thanked Allah for something small': '‡§ï‡§ø‡§∏‡•Ä ‡§õ‡•ã‡§ü‡•Ä ‡§ö‡•Ä‡§ú‡§º ‡§™‡§∞ ‡§Ö‡§≤‡•ç‡§≤‡§æ‡§π ‡§ï‡§æ ‡§∂‡•Å‡§ï‡•ç‡§∞ ‡§Ö‡§¶‡§æ ‡§ï‡§ø‡§Ø‡§æ',
            'Left something that I can\'t do while fasting after breaking the fast too': '‡§ï‡•ã‡§à ‡§ê‡§∏‡•Ä ‡§ö‡•Ä‡§ú‡§º ‡§õ‡•ã‡§°‡§º‡•Ä ‡§ú‡•ã ‡§∞‡•ã‡§ú‡§º‡•á ‡§Æ‡•á‡§Ç ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§∞ ‡§∏‡§ï‡§§‡§æ, ‡§á‡§´‡§º‡•ç‡§§‡§æ‡§∞ ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§≠‡•Ä',
            'Gave charity (any amount)': '‡§∏‡§¶‡§ï‡§º‡§æ ‡§¶‡§ø‡§Ø‡§æ (‡§ï‡•ã‡§à ‡§≠‡•Ä ‡§∞‡§ï‡§º‡§Æ)',
            'Helped someone without expectation of return': '‡§ï‡§ø‡§∏‡•Ä ‡§ï‡•Ä ‡§Æ‡§¶‡§¶ ‡§ï‡•Ä ‡§¨‡§ø‡§®‡§æ ‡§¨‡§¶‡§≤‡•á ‡§ï‡•Ä ‡§â‡§Æ‡•ç‡§Æ‡•Ä‡§¶ ‡§ï‡•á',
            
            // Stage 6
            'Learned and reflected on first 10 ayahs of Surah Al-Kahf': '‡§∏‡•Ç‡§∞‡§π ‡§Ö‡§≤-‡§ï‡§π‡§´‡§º ‡§ï‡•Ä ‡§™‡§π‡§≤‡•Ä 10 ‡§Ü‡§Ø‡§§‡•á‡§Ç ‡§∏‡•Ä‡§ñ‡•Ä‡§Ç ‡§î‡§∞ ‡§â‡§® ‡§™‡§∞ ‡§ó‡§º‡•å‡§∞ ‡§ï‡§ø‡§Ø‡§æ',
            'Planned one good deed to continue after Ramadan': '‡§∞‡§Æ‡§ú‡§º‡§æ‡§® ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§≠‡•Ä ‡§ú‡§æ‡§∞‡•Ä ‡§∞‡§ñ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§è‡§ï ‡§®‡•á‡§ï ‡§ï‡§æ‡§Æ ‡§ï‡•Ä ‡§Ø‡•ã‡§ú‡§®‡§æ ‡§¨‡§®‡§æ‡§à',
            'Taught someone a beneficial Islamic knowledge': '‡§ï‡§ø‡§∏‡•Ä ‡§ï‡•ã ‡§´‡§º‡§æ‡§Ø‡§¶‡•á‡§Æ‡§Ç‡§¶ ‡§á‡§∏‡•ç‡§≤‡§æ‡§Æ‡•Ä ‡§á‡§≤‡•ç‡§Æ ‡§∏‡§ø‡§ñ‡§æ‡§Ø‡§æ',
            'Read the following ayah with translation and reflect about it': '‡§Ø‡§π ‡§Ü‡§Ø‡§§ ‡§§‡§∞‡•ç‡§ú‡•Å‡§Æ‡•á ‡§ï‡•á ‡§∏‡§æ‡§• ‡§™‡§¢‡§º‡•á‡§Ç ‡§î‡§∞ ‡§â‡§∏ ‡§™‡§∞ ‡§ó‡§º‡•å‡§∞ ‡§ï‡§∞‡•á‡§Ç',
            'Reflective Day: Read the following ayah and reflect on your Week 1 progress': '‡§§‡§¶‡§¨‡•ç‡§¨‡•Å‡§∞ ‡§ï‡§æ ‡§¶‡§ø‡§®: ‡§Ø‡§π ‡§Ü‡§Ø‡§§ ‡§™‡§¢‡§º‡•á‡§Ç ‡§î‡§∞ ‡§π‡§´‡§º‡•ç‡§§‡•á 1 ‡§ï‡•Ä ‡§™‡•ç‡§∞‡§ó‡§§‡§ø ‡§™‡§∞ ‡§ó‡§º‡•å‡§∞ ‡§ï‡§∞‡•á‡§Ç',
            'Reflective Day: Read the following ayah and assess your self-control progress': '‡§§‡§¶‡§¨‡•ç‡§¨‡•Å‡§∞ ‡§ï‡§æ ‡§¶‡§ø‡§®: ‡§Ø‡§π ‡§Ü‡§Ø‡§§ ‡§™‡§¢‡§º‡•á‡§Ç ‡§î‡§∞ ‡§Ü‡§§‡•ç‡§Æ-‡§®‡§ø‡§Ø‡§Ç‡§§‡•ç‡§∞‡§£ ‡§ï‡•Ä ‡§™‡•ç‡§∞‡§ó‡§§‡§ø ‡§ï‡§æ ‡§ú‡§æ‡§Ø‡§ú‡§º‡§æ ‡§≤‡•á‡§Ç',
            'Reflective Day: Read the following ayah and assess your character growth': '‡§§‡§¶‡§¨‡•ç‡§¨‡•Å‡§∞ ‡§ï‡§æ ‡§¶‡§ø‡§®: ‡§Ø‡§π ‡§Ü‡§Ø‡§§ ‡§™‡§¢‡§º‡•á‡§Ç ‡§î‡§∞ ‡§Ö‡§™‡§®‡•á ‡§Ö‡§ñ‡§º‡§≤‡§æ‡§ï‡§º ‡§ï‡•Ä ‡§§‡§∞‡§ï‡§º‡•ç‡§ï‡§º‡•Ä ‡§ï‡§æ ‡§ú‡§æ‡§Ø‡§ú‡§º‡§æ ‡§≤‡•á‡§Ç',
            'Reflective Day: Read the following ayah and assess your spiritual purification': '‡§§‡§¶‡§¨‡•ç‡§¨‡•Å‡§∞ ‡§ï‡§æ ‡§¶‡§ø‡§®: ‡§Ø‡§π ‡§Ü‡§Ø‡§§ ‡§™‡§¢‡§º‡•á‡§Ç ‡§î‡§∞ ‡§Ö‡§™‡§®‡•Ä ‡§∞‡•Ç‡§π‡§æ‡§®‡•Ä ‡§§‡§ú‡§º‡§ï‡§ø‡§Ø‡§æ ‡§ï‡§æ ‡§ú‡§æ‡§Ø‡§ú‡§º‡§æ ‡§≤‡•á‡§Ç',
            'Reflective Day: Read the following ayah and reflect on striving for excellence': '‡§§‡§¶‡§¨‡•ç‡§¨‡•Å‡§∞ ‡§ï‡§æ ‡§¶‡§ø‡§®: ‡§Ø‡§π ‡§Ü‡§Ø‡§§ ‡§™‡§¢‡§º‡•á‡§Ç ‡§î‡§∞ ‡§â‡§§‡•ç‡§ï‡•É‡§∑‡•ç‡§ü‡§§‡§æ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡•ã‡§∂‡§ø‡§∂ ‡§™‡§∞ ‡§ó‡§º‡•å‡§∞ ‡§ï‡§∞‡•á‡§Ç',
            'Final Reflection: Read the following ayah and reflect on your complete transformation journey': '‡§Ü‡§ñ‡§º‡§ø‡§∞‡•Ä ‡§§‡§¶‡§¨‡•ç‡§¨‡•Å‡§∞: ‡§Ø‡§π ‡§Ü‡§Ø‡§§ ‡§™‡§¢‡§º‡•á‡§Ç ‡§î‡§∞ ‡§Ö‡§™‡§®‡•á ‡§™‡•Ç‡§∞‡•á ‡§∏‡§´‡§º‡§∞ ‡§™‡§∞ ‡§ó‡§º‡•å‡§∞ ‡§ï‡§∞‡•á‡§Ç'
        };
        
        function translate(text) {
            if (currentLanguage === 'hi' && TRANSLATIONS[text]) {
                return TRANSLATIONS[text];
            }
            return text;
        }
        
        function setLanguage(lang) {
            console.log('Setting language to:', lang);
            currentLanguage = lang;
            
            // Update toggle active state
            const langEn = document.getElementById('lang-en');
            const langHi = document.getElementById('lang-hi');
            if (langEn && langHi) {
                langEn.classList.toggle('active', lang === 'en');
                langHi.classList.toggle('active', lang === 'hi');
            }
            
            // Update all text
            updateLanguage();
        }
        
        function toggleLanguage() {
            // Keep this for backward compatibility
            const newLang = currentLanguage === 'en' ? 'hi' : 'en';
            setLanguage(newLang);
        }
        
        function updateLanguage() {
            // Update all elements with lang-text class
            document.querySelectorAll('.lang-text').forEach(el => {
                const key = currentLanguage === 'en' ? 'data-en' : 'data-hi';
                if (el.hasAttribute(key)) {
                    el.textContent = el.getAttribute(key);
                }
            });
            
            // Refresh UI to update all translated content
            if (userData.mobile) {
                updateUI();
            }
        }

        // Daily tasks and Quranic verses - FINALIZED
        const TASKS_DATA = {
            // Stage 1: Intention & Discipline (Days 1-5)
            1: {
                tasks: [
                    { title: "Prayed on time", points: 10 },
                    { title: "Said Bismillah before eating", points: 10 },
                    { title: "Removed an obstacle from the path", points: 10 },
                    { title: "Practiced gratitude (listed 3 blessings)", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "ÿ•ŸêŸÜŸéŸë ÿßŸÑÿµŸéŸëŸÑŸéÿßÿ©Ÿé ŸÉŸéÿßŸÜŸéÿ™Ÿí ÿπŸéŸÑŸéŸâ ÿßŸÑŸíŸÖŸèÿ§ŸíŸÖŸêŸÜŸêŸäŸÜŸé ŸÉŸêÿ™Ÿéÿßÿ®Ÿãÿß ŸÖŸéŸëŸàŸíŸÇŸèŸàÿ™Ÿãÿß",
                    ayah: "Indeed, prayer has been decreed upon the believers at fixed times. (An-Nisa 4:103)",
                    ayahHindi: "‡§¨‡•á‡§∂‡§ï, ‡§Æ‡•ã‡§Æ‡§ø‡§®‡•ã‡§Ç ‡§™‡§∞ ‡§®‡§Æ‡§æ‡§ú‡§º ‡§µ‡§ï‡•ç‡§§ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§´‡§º‡§∞‡•ç‡§ú‡§º ‡§ï‡•Ä ‡§ó‡§à ‡§π‡•à‡•§ (‡§Ö‡§®-‡§®‡§ø‡§∏‡§æ 4:103)",
                    relatesTo: "Prayer" 
                }
            },
            2: {
                tasks: [
                    { title: "Prayed on time", points: 10 },
                    { title: "Said Bismillah before eating", points: 10 },
                    { title: "Removed an obstacle from the path", points: 10 },
                    { title: "Practiced gratitude (listed 3 blessings)", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "ŸÅŸéŸÉŸèŸÑŸèŸàÿß ŸÖŸêŸÖŸéŸëÿß ÿ±Ÿéÿ≤ŸéŸÇŸéŸÉŸèŸÖŸè ÿßŸÑŸÑŸéŸëŸáŸè ÿ≠ŸéŸÑŸéÿßŸÑŸãÿß ÿ∑ŸéŸäŸêŸëÿ®Ÿãÿß ŸàŸéÿßÿ¥ŸíŸÉŸèÿ±ŸèŸàÿß ŸÜŸêÿπŸíŸÖŸéÿ™Ÿé ÿßŸÑŸÑŸéŸëŸáŸê",
                    ayah: "So eat of what Allah has provided for you [which is] lawful and good. And be grateful for the favor of Allah. (An-Nahl 16:114)",
                    ayahHindi: "‡§§‡•ã ‡§ñ‡§æ‡§ì ‡§ú‡•ã ‡§Ö‡§≤‡•ç‡§≤‡§æ‡§π ‡§®‡•á ‡§§‡•Å‡§Æ‡•ç‡§π‡•á‡§Ç ‡§¶‡§ø‡§Ø‡§æ ‡§π‡•à ‡§ú‡•ã ‡§π‡§≤‡§æ‡§≤ ‡§î‡§∞ ‡§™‡§æ‡§ï ‡§π‡•à‡•§ ‡§î‡§∞ ‡§Ö‡§≤‡•ç‡§≤‡§æ‡§π ‡§ï‡•Ä ‡§®‡•á‡§Ö‡§Æ‡§§ ‡§ï‡§æ ‡§∂‡•Å‡§ï‡•ç‡§∞ ‡§Ö‡§¶‡§æ ‡§ï‡§∞‡•ã‡•§ (‡§Ö‡§®-‡§®‡§π‡§≤ 16:114)",
                    relatesTo: "Bismillah" 
                }
            },
            3: {
                tasks: [
                    { title: "Prayed on time", points: 10 },
                    { title: "Said Bismillah before eating", points: 10 },
                    { title: "Removed an obstacle from the path", points: 10 },
                    { title: "Practiced gratitude (listed 3 blessings)", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "ŸàŸéŸÖŸéŸÜ ŸäŸéÿπŸíŸÖŸéŸÑŸí ŸÖŸêŸÜŸé ÿßŸÑÿµŸéŸëÿßŸÑŸêÿ≠Ÿéÿßÿ™Ÿê ŸÖŸêŸÜ ÿ∞ŸéŸÉŸéÿ±Ÿç ÿ£ŸéŸàŸí ÿ£ŸèŸÜÿ´ŸéŸâŸ∞ ŸàŸéŸáŸèŸàŸé ŸÖŸèÿ§ŸíŸÖŸêŸÜŸå ŸÅŸéÿ£ŸèŸàŸÑŸéŸ∞ÿ¶ŸêŸÉŸé ŸäŸéÿØŸíÿÆŸèŸÑŸèŸàŸÜŸé ÿßŸÑŸíÿ¨ŸéŸÜŸéŸëÿ©Ÿé",
                    ayah: "And whoever does righteous deeds, whether male or female, while being a believer - those will enter Paradise. (An-Nisa 4:124)",
                    ayahHindi: "‡§î‡§∞ ‡§ú‡•ã ‡§®‡•á‡§ï ‡§ï‡§æ‡§Æ ‡§ï‡§∞‡•á, ‡§Æ‡§∞‡•ç‡§¶ ‡§π‡•ã ‡§Ø‡§æ ‡§î‡§∞‡§§, ‡§î‡§∞ ‡§µ‡•ã ‡§Æ‡•ã‡§Æ‡§ø‡§® ‡§π‡•ã - ‡§§‡•ã ‡§ê‡§∏‡•á ‡§≤‡•ã‡§ó ‡§ú‡§®‡•ç‡§®‡§§ ‡§Æ‡•á‡§Ç ‡§¶‡§æ‡§ñ‡§º‡§ø‡§≤ ‡§π‡•ã‡§Ç‡§ó‡•á‡•§ (‡§Ö‡§®-‡§®‡§ø‡§∏‡§æ 4:124)",
                    relatesTo: "Good Deeds" 
                }
            },
            4: {
                tasks: [
                    { title: "Prayed on time", points: 10 },
                    { title: "Said Bismillah before eating", points: 10 },
                    { title: "Removed an obstacle from the path", points: 10 },
                    { title: "Practiced gratitude (listed 3 blessings)", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "ŸÑŸéÿ¶ŸêŸÜ ÿ¥ŸéŸÉŸéÿ±Ÿíÿ™ŸèŸÖŸí ŸÑŸéÿ£Ÿéÿ≤ŸêŸäÿØŸéŸÜŸéŸëŸÉŸèŸÖŸí",
                    ayah: "If you are grateful, I will surely increase you [in favor]. (Ibrahim 14:7)",
                    ayahHindi: "‡§Ö‡§ó‡§∞ ‡§§‡•Å‡§Æ ‡§∂‡•Å‡§ï‡•ç‡§∞ ‡§Ö‡§¶‡§æ ‡§ï‡§∞‡•ã‡§ó‡•á ‡§§‡•ã ‡§Æ‡•à‡§Ç ‡§ú‡§º‡§∞‡•Ç‡§∞ ‡§§‡•Å‡§Æ‡•ç‡§π‡•á‡§Ç ‡§î‡§∞ ‡§ú‡§º‡•ç‡§Ø‡§æ‡§¶‡§æ ‡§¶‡•Ç‡§Å‡§ó‡§æ‡•§ (‡§á‡§¨‡•ç‡§∞‡§æ‡§π‡•Ä‡§Æ 14:7)",
                    relatesTo: "Gratitude" 
                }
            },
            5: {
                tasks: [
                    { title: "Prayed on time", points: 10 },
                    { title: "Said Bismillah before eating", points: 10 },
                    { title: "Removed an obstacle from the path", points: 10 },
                    { title: "Practiced gratitude (listed 3 blessings)", points: 10 }
                ],
                quranTask: { 
                    title: "Reflective Day: Read the following ayah and reflect on your Week 1 progress", 
                    points: 20,
                    arabic: "ŸÇŸèŸÑŸí ÿ•ŸêŸÜŸéŸë ÿµŸéŸÑŸéÿßÿ™ŸêŸä ŸàŸéŸÜŸèÿ≥ŸèŸÉŸêŸä ŸàŸéŸÖŸéÿ≠ŸíŸäŸéÿßŸäŸé ŸàŸéŸÖŸéŸÖŸéÿßÿ™ŸêŸä ŸÑŸêŸÑŸéŸëŸáŸê ÿ±Ÿéÿ®ŸêŸë ÿßŸÑŸíÿπŸéÿßŸÑŸéŸÖŸêŸäŸÜŸé",
                    ayah: "Say, 'Indeed, my prayer, my rites of sacrifice, my living and my dying are for Allah, Lord of the worlds.' (Al-An'am 6:162)",
                    ayahHindi: "‡§ï‡§π ‡§¶‡•ã, '‡§¨‡•á‡§∂‡§ï ‡§Æ‡•á‡§∞‡•Ä ‡§®‡§Æ‡§æ‡§ú‡§º, ‡§Æ‡•á‡§∞‡•Ä ‡§ï‡•Å‡§∞‡•ç‡§¨‡§æ‡§®‡•Ä, ‡§Æ‡•á‡§∞‡•Ä ‡§ú‡§º‡§ø‡§®‡•ç‡§¶‡§ó‡•Ä ‡§î‡§∞ ‡§Æ‡•á‡§∞‡•Ä ‡§Æ‡•å‡§§ ‡§Ö‡§≤‡•ç‡§≤‡§æ‡§π ‡§ï‡•á ‡§≤‡§ø‡§è ‡§π‡•à ‡§ú‡•ã ‡§§‡§Æ‡§æ‡§Æ ‡§ú‡§π‡§æ‡§Å ‡§ï‡§æ ‡§∞‡§¨ ‡§π‡•à‡•§' (‡§Ö‡§≤-‡§Ö‡§®‡§Ü‡§Æ 6:162)",
                    relatesTo: "Stage Summary" 
                }
            },

            // Stage 2: Self Control (Days 6-10)
            6: {
                tasks: [
                    { title: "Learned the translation of Surah Al-Fatiha and reflected on its meaning", points: 10 },
                    { title: "Said Alhamdulillah for a blessing", points: 10 },
                    { title: "Controlled anger in a difficult situation", points: 10 },
                    { title: "Avoided gossip and backbiting", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "ÿßŸÑŸíÿ≠ŸéŸÖŸíÿØŸè ŸÑŸêŸÑŸéŸëŸáŸê ÿ±Ÿéÿ®ŸêŸë ÿßŸÑŸíÿπŸéÿßŸÑŸéŸÖŸêŸäŸÜŸé",
                    ayah: "All praise is due to Allah, Lord of the worlds. (Al-Fatiha 1:2)",
                    ayahHindi: "‡§§‡§Æ‡§æ‡§Æ ‡§§‡§æ‡§∞‡•Ä‡§´‡§º ‡§Ö‡§≤‡•ç‡§≤‡§æ‡§π ‡§ï‡•á ‡§≤‡§ø‡§è ‡§π‡•à ‡§ú‡•ã ‡§§‡§Æ‡§æ‡§Æ ‡§ú‡§π‡§æ‡§Å ‡§ï‡§æ ‡§∞‡§¨ ‡§π‡•à‡•§ (‡§Ö‡§≤-‡§´‡§º‡§æ‡§§‡§ø‡§π‡§æ 1:2)",
                    relatesTo: "Al-Fatiha" 
                }
            },
            7: {
                tasks: [
                    { title: "Learned the translation of Surah Al-Fatiha and reflected on its meaning", points: 10 },
                    { title: "Said Alhamdulillah for a blessing", points: 10 },
                    { title: "Controlled anger in a difficult situation", points: 10 },
                    { title: "Avoided gossip and backbiting", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "ŸÅŸéÿßÿ∞ŸíŸÉŸèÿ±ŸèŸàŸÜŸêŸä ÿ£Ÿéÿ∞ŸíŸÉŸèÿ±ŸíŸÉŸèŸÖŸí ŸàŸéÿßÿ¥ŸíŸÉŸèÿ±ŸèŸàÿß ŸÑŸêŸä ŸàŸéŸÑŸéÿß ÿ™ŸéŸÉŸíŸÅŸèÿ±ŸèŸàŸÜŸê",
                    ayah: "So remember Me; I will remember you. And be grateful to Me and do not deny Me. (Al-Baqarah 2:152)",
                    ayahHindi: "‡§§‡•ã ‡§Æ‡•Å‡§ù‡•á ‡§Ø‡§æ‡§¶ ‡§ï‡§∞‡•ã, ‡§Æ‡•à‡§Ç ‡§§‡•Å‡§Æ‡•ç‡§π‡•á‡§Ç ‡§Ø‡§æ‡§¶ ‡§ï‡§∞‡•Ç‡§Å‡§ó‡§æ‡•§ ‡§î‡§∞ ‡§Æ‡•á‡§∞‡§æ ‡§∂‡•Å‡§ï‡•ç‡§∞ ‡§Ö‡§¶‡§æ ‡§ï‡§∞‡•ã ‡§î‡§∞ ‡§®‡§æ‡§∂‡•Å‡§ï‡•ç‡§∞‡•Ä ‡§® ‡§ï‡§∞‡•ã‡•§ (‡§Ö‡§≤-‡§¨‡§ï‡§º‡§∞‡§π 2:152)",
                    relatesTo: "Alhamdulillah" 
                }
            },
            8: {
                tasks: [
                    { title: "Learned the translation of Surah Al-Fatiha and reflected on its meaning", points: 10 },
                    { title: "Said Alhamdulillah for a blessing", points: 10 },
                    { title: "Controlled anger in a difficult situation", points: 10 },
                    { title: "Avoided gossip and backbiting", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "ŸàŸéÿßŸÑŸíŸÉŸéÿßÿ∏ŸêŸÖŸêŸäŸÜŸé ÿßŸÑŸíÿ∫ŸéŸäŸíÿ∏Ÿé ŸàŸéÿßŸÑŸíÿπŸéÿßŸÅŸêŸäŸÜŸé ÿπŸéŸÜŸê ÿßŸÑŸÜŸéŸëÿßÿ≥Ÿê ŸàŸéÿßŸÑŸÑŸéŸëŸáŸè ŸäŸèÿ≠Ÿêÿ®ŸèŸë ÿßŸÑŸíŸÖŸèÿ≠Ÿíÿ≥ŸêŸÜŸêŸäŸÜŸé",
                    ayah: "And those who restrain anger and pardon people - and Allah loves the doers of good. (Al-Imran 3:134)",
                    ayahHindi: "‡§î‡§∞ ‡§µ‡•ã ‡§ú‡•ã ‡§ó‡§º‡•Å‡§∏‡•ç‡§∏‡§æ ‡§™‡•Ä ‡§ú‡§æ‡§§‡•á ‡§π‡•à‡§Ç ‡§î‡§∞ ‡§≤‡•ã‡§ó‡•ã‡§Ç ‡§ï‡•ã ‡§Æ‡§æ‡§´‡§º ‡§ï‡§∞ ‡§¶‡•á‡§§‡•á ‡§π‡•à‡§Ç - ‡§î‡§∞ ‡§Ö‡§≤‡•ç‡§≤‡§æ‡§π ‡§®‡•á‡§ï‡•Ä ‡§ï‡§∞‡§®‡•á ‡§µ‡§æ‡§≤‡•ã‡§Ç ‡§∏‡•á ‡§Æ‡•ã‡§π‡§¨‡•ç‡§¨‡§§ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡•§ (‡§Ü‡§≤‡•á-‡§á‡§Æ‡§∞‡§æ‡§® 3:134)",
                    relatesTo: "Controlling Anger" 
                }
            },
            9: {
                tasks: [
                    { title: "Learned the translation of Surah Al-Fatiha and reflected on its meaning", points: 10 },
                    { title: "Said Alhamdulillah for a blessing", points: 10 },
                    { title: "Controlled anger in a difficult situation", points: 10 },
                    { title: "Avoided gossip and backbiting", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "ŸàŸéŸÑŸéÿß ÿ™Ÿéÿ¨Ÿéÿ≥ŸéŸëÿ≥ŸèŸàÿß ŸàŸéŸÑŸéÿß ŸäŸéÿ∫Ÿíÿ™Ÿéÿ® ÿ®ŸéŸëÿπŸíÿ∂ŸèŸÉŸèŸÖ ÿ®ŸéÿπŸíÿ∂Ÿãÿß",
                    ayah: "And do not spy or backbite each other. Would one of you like to eat the flesh of his brother when dead? (Al-Hujurat 49:12)",
                    ayahHindi: "‡§î‡§∞ ‡§® ‡§ü‡•ã‡§π ‡§≤‡•ã ‡§î‡§∞ ‡§® ‡§è‡§ï ‡§¶‡•Ç‡§∏‡§∞‡•á ‡§ï‡•Ä ‡§ó‡§º‡•Ä‡§¨‡§§ ‡§ï‡§∞‡•ã‡•§ ‡§ï‡•ç‡§Ø‡§æ ‡§§‡•Å‡§Æ‡§Æ‡•á‡§Ç ‡§∏‡•á ‡§ï‡•ã‡§à ‡§™‡§∏‡§Ç‡§¶ ‡§ï‡§∞‡•á‡§ó‡§æ ‡§ï‡§ø ‡§Ö‡§™‡§®‡•á ‡§Æ‡•Å‡§∞‡•ç‡§¶‡§æ ‡§≠‡§æ‡§à ‡§ï‡§æ ‡§ó‡•ã‡§∂‡•ç‡§§ ‡§ñ‡§æ‡§è? (‡§Ö‡§≤-‡§π‡•Å‡§ú‡•Å‡§∞‡§æ‡§§ 49:12)",
                    relatesTo: "Avoiding Gossip" 
                }
            },
            10: {
                tasks: [
                    { title: "Learned the translation of Surah Al-Fatiha and reflected on its meaning", points: 10 },
                    { title: "Said Alhamdulillah for a blessing", points: 10 },
                    { title: "Controlled anger in a difficult situation", points: 10 },
                    { title: "Avoided gossip and backbiting", points: 10 }
                ],
                quranTask: { 
                    title: "Reflective Day: Read the following ayah and assess your self-control progress", 
                    points: 20,
                    arabic: "ÿ•ŸêŸÜŸéŸëŸÖŸéÿß ŸäŸèŸàŸéŸÅŸéŸëŸâ ÿßŸÑÿµŸéŸëÿßÿ®Ÿêÿ±ŸèŸàŸÜŸé ÿ£Ÿéÿ¨Ÿíÿ±ŸéŸáŸèŸÖ ÿ®Ÿêÿ∫ŸéŸäŸíÿ±Ÿê ÿ≠Ÿêÿ≥Ÿéÿßÿ®Ÿç",
                    ayah: "Indeed, the patient will be given their reward without account. (Az-Zumar 39:10)",
                    ayahHindi: "‡§¨‡•á‡§∂‡§ï ‡§∏‡§¨‡•ç‡§∞ ‡§ï‡§∞‡§®‡•á ‡§µ‡§æ‡§≤‡•ã‡§Ç ‡§ï‡•ã ‡§â‡§®‡§ï‡§æ ‡§Ö‡§ú‡•ç‡§∞ ‡§¨‡•á‡§π‡§ø‡§∏‡§æ‡§¨ ‡§¶‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§è‡§ó‡§æ‡•§ (‡§Ö‡§ú‡§º-‡§ú‡§º‡•Å‡§Æ‡§∞ 39:10)",
                    relatesTo: "Stage Summary" 
                }
            },

            // Stage 3: Character Refinement (Days 11-15)
            11: {
                tasks: [
                    { title: "Prayed Tahajjud", points: 10 },
                    { title: "Did one good deed quietly", points: 10 },
                    { title: "Performed an act of kindness for someone", points: 10 },
                    { title: "Spoke kind words to family members", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "ŸàŸéŸÖŸêŸÜŸé ÿßŸÑŸÑŸéŸëŸäŸíŸÑŸê ŸÅŸéÿ™ŸéŸáŸéÿ¨ŸéŸëÿØŸí ÿ®ŸêŸáŸê ŸÜŸéÿßŸÅŸêŸÑŸéÿ©Ÿã ŸÑŸéŸëŸÉŸé",
                    ayah: "And from [part of] the night, pray with it as additional [worship] for you. (Al-Isra 17:79)",
                    ayahHindi: "‡§î‡§∞ ‡§∞‡§æ‡§§ ‡§ï‡•á ‡§ï‡•Å‡§õ ‡§π‡§ø‡§∏‡•ç‡§∏‡•á ‡§Æ‡•á‡§Ç ‡§§‡§π‡§ú‡•ç‡§ú‡•Å‡§¶ ‡§™‡§¢‡§º‡•ã, ‡§Ø‡§π ‡§§‡•Å‡§Æ‡•ç‡§π‡§æ‡§∞‡•á ‡§≤‡§ø‡§è ‡§®‡§´‡§º‡§ø‡§≤ ‡§π‡•à‡•§ (‡§Ö‡§≤-‡§á‡§∏‡§∞‡§æ 17:79)",
                    relatesTo: "Tahajjud" 
                }
            },
            12: {
                tasks: [
                    { title: "Prayed Tahajjud", points: 10 },
                    { title: "Did one good deed quietly", points: 10 },
                    { title: "Performed an act of kindness for someone", points: 10 },
                    { title: "Spoke kind words to family members", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "ÿ•ŸêŸÜ ÿ™Ÿèÿ®ŸíÿØŸèŸàÿß ÿßŸÑÿµŸéŸëÿØŸéŸÇŸéÿßÿ™Ÿê ŸÅŸéŸÜŸêÿπŸêŸÖŸéŸëÿß ŸáŸêŸäŸé ŸàŸéÿ•ŸêŸÜ ÿ™ŸèÿÆŸíŸÅŸèŸàŸáŸéÿß ŸàŸéÿ™Ÿèÿ§Ÿíÿ™ŸèŸàŸáŸéÿß ÿßŸÑŸíŸÅŸèŸÇŸéÿ±Ÿéÿßÿ°Ÿé ŸÅŸéŸáŸèŸàŸé ÿÆŸéŸäŸíÿ±Ÿå ŸÑŸéŸëŸÉŸèŸÖŸí",
                    ayah: "If you disclose your charitable expenditures, they are good; but if you conceal them and give them to the poor, it is better for you. (Al-Baqarah 2:271)",
                    ayahHindi: "‡§Ö‡§ó‡§∞ ‡§§‡•Å‡§Æ ‡§Ö‡§™‡§®‡•á ‡§∏‡§¶‡§ï‡§º‡§æ‡§§ ‡§ú‡§º‡§æ‡§π‡§ø‡§∞ ‡§ï‡§∞‡•ã ‡§§‡•ã ‡§Ö‡§ö‡•ç‡§õ‡§æ ‡§π‡•à, ‡§î‡§∞ ‡§Ö‡§ó‡§∞ ‡§õ‡•Å‡§™‡§æ‡§ì ‡§î‡§∞ ‡§ó‡§º‡§∞‡•Ä‡§¨‡•ã‡§Ç ‡§ï‡•ã ‡§¶‡•ã ‡§§‡•ã ‡§§‡•Å‡§Æ‡•ç‡§π‡§æ‡§∞‡•á ‡§≤‡§ø‡§è ‡§¨‡•á‡§π‡§§‡§∞ ‡§π‡•à‡•§ (‡§Ö‡§≤-‡§¨‡§ï‡§º‡§∞‡§π 2:271)",
                    relatesTo: "Secret Good Deeds" 
                }
            },
            13: {
                tasks: [
                    { title: "Prayed Tahajjud", points: 10 },
                    { title: "Did one good deed quietly", points: 10 },
                    { title: "Performed an act of kindness for someone", points: 10 },
                    { title: "Spoke kind words to family members", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "ŸàŸéÿßŸÅŸíÿπŸéŸÑŸèŸàÿß ÿßŸÑŸíÿÆŸéŸäŸíÿ±Ÿé ŸÑŸéÿπŸéŸÑŸéŸëŸÉŸèŸÖŸí ÿ™ŸèŸÅŸíŸÑŸêÿ≠ŸèŸàŸÜŸé",
                    ayah: "And do good that you may succeed. (Al-Hajj 22:77)",
                    ayahHindi: "‡§î‡§∞ ‡§®‡•á‡§ï‡•Ä ‡§ï‡§∞‡•ã ‡§§‡§æ‡§ï‡§ø ‡§§‡•Å‡§Æ ‡§ï‡§æ‡§Æ‡§Ø‡§æ‡§¨ ‡§π‡•ã‡•§ (‡§Ö‡§≤-‡§π‡§ú‡•ç‡§ú 22:77)",
                    relatesTo: "Kindness" 
                }
            },
            14: {
                tasks: [
                    { title: "Prayed Tahajjud", points: 10 },
                    { title: "Did one good deed quietly", points: 10 },
                    { title: "Performed an act of kindness for someone", points: 10 },
                    { title: "Spoke kind words to family members", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "ŸàŸéŸÇŸèŸàŸÑŸèŸàÿß ŸÑŸêŸÑŸÜŸéŸëÿßÿ≥Ÿê ÿ≠Ÿèÿ≥ŸíŸÜŸãÿß",
                    ayah: "And speak to people good [words]. (Al-Baqarah 2:83)",
                    ayahHindi: "‡§î‡§∞ ‡§≤‡•ã‡§ó‡•ã‡§Ç ‡§∏‡•á ‡§Ö‡§ö‡•ç‡§õ‡•á ‡§≤‡§´‡§º‡•ç‡§ú‡§º‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§¨‡§æ‡§§ ‡§ï‡§∞‡•ã‡•§ (‡§Ö‡§≤-‡§¨‡§ï‡§º‡§∞‡§π 2:83)",
                    relatesTo: "Kind Words" 
                }
            },
            15: {
                tasks: [
                    { title: "Prayed Tahajjud", points: 10 },
                    { title: "Did one good deed quietly", points: 10 },
                    { title: "Performed an act of kindness for someone", points: 10 },
                    { title: "Spoke kind words to family members", points: 10 }
                ],
                quranTask: { 
                    title: "Reflective Day: Read the following ayah and assess your character growth", 
                    points: 20,
                    arabic: "ŸàŸéÿ•ŸêŸÜŸéŸëŸÉŸé ŸÑŸéÿπŸéŸÑŸéŸâŸ∞ ÿÆŸèŸÑŸèŸÇŸç ÿπŸéÿ∏ŸêŸäŸÖŸç",
                    ayah: "And indeed, you are of a great moral character. (Al-Qalam 68:4)",
                    ayahHindi: "‡§î‡§∞ ‡§¨‡•á‡§∂‡§ï, ‡§Ü‡§™ ‡§¨‡§π‡•Å‡§§ ‡§¨‡§°‡§º‡•á ‡§Ö‡§ñ‡§º‡§≤‡§æ‡§ï‡§º ‡§µ‡§æ‡§≤‡•á ‡§π‡•à‡§Ç‡•§ (‡§Ö‡§≤-‡§ï‡§º‡§≤‡§Æ 68:4)",
                    relatesTo: "Stage Summary" 
                }
            },

            // Stage 4: Inner Purification (Days 16-20)
            16: {
                tasks: [
                    { title: "Reflected on Fatiha and concentrated on it while praying", points: 10 },
                    { title: "Pondered on the things Allah created in the world and said SubhanAllah", points: 10 },
                    { title: "Made sincere dua for someone else", points: 10 },
                    { title: "Reflected on personal shortcomings in journal", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "ŸÇŸéÿØŸí ÿ£ŸéŸÅŸíŸÑŸéÿ≠Ÿé ÿßŸÑŸíŸÖŸèÿ§ŸíŸÖŸêŸÜŸèŸàŸÜŸé ÿßŸÑŸéŸëÿ∞ŸêŸäŸÜŸé ŸáŸèŸÖŸí ŸÅŸêŸä ÿµŸéŸÑŸéÿßÿ™ŸêŸáŸêŸÖŸí ÿÆŸéÿßÿ¥ŸêÿπŸèŸàŸÜŸé",
                    ayah: "Successful indeed are the believers who are humble in their prayers. (Al-Mu'minun 23:1-2)",
                    ayahHindi: "‡§¨‡•á‡§∂‡§ï ‡§ï‡§æ‡§Æ‡§Ø‡§æ‡§¨ ‡§π‡•Å‡§è ‡§µ‡•ã ‡§Æ‡•ã‡§Æ‡§ø‡§® ‡§ú‡•ã ‡§Ö‡§™‡§®‡•Ä ‡§®‡§Æ‡§æ‡§ú‡§º‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§ñ‡•Å‡§∂‡•Ç ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç‡•§ (‡§Ö‡§≤-‡§Æ‡•ã‡§Æ‡§ø‡§®‡•Ç‡§® 23:1-2)",
                    relatesTo: "Prayer Concentration" 
                }
            },
            17: {
                tasks: [
                    { title: "Reflected on Fatiha and concentrated on it while praying", points: 10 },
                    { title: "Pondered on the things Allah created in the world and said SubhanAllah", points: 10 },
                    { title: "Made sincere dua for someone else", points: 10 },
                    { title: "Reflected on personal shortcomings in journal", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "ÿ•ŸêŸÜŸéŸë ŸÅŸêŸä ÿÆŸéŸÑŸíŸÇŸê ÿßŸÑÿ≥ŸéŸëŸÖŸéÿßŸàŸéÿßÿ™Ÿê ŸàŸéÿßŸÑŸíÿ£Ÿéÿ±Ÿíÿ∂Ÿê ŸàŸéÿßÿÆŸíÿ™ŸêŸÑŸéÿßŸÅŸê ÿßŸÑŸÑŸéŸëŸäŸíŸÑŸê ŸàŸéÿßŸÑŸÜŸéŸëŸáŸéÿßÿ±Ÿê ŸÑŸéÿ¢ŸäŸéÿßÿ™Ÿç ŸÑŸêŸëÿ£ŸèŸàŸÑŸêŸä ÿßŸÑŸíÿ£ŸéŸÑŸíÿ®Ÿéÿßÿ®Ÿê",
                    ayah: "Indeed, in the creation of the heavens and the earth and the alternation of the night and the day are signs for those of understanding. (Al-Imran 3:190)",
                    ayahHindi: "‡§¨‡•á‡§∂‡§ï ‡§Ü‡§∏‡§Æ‡§æ‡§®‡•ã‡§Ç ‡§î‡§∞ ‡§ú‡§º‡§Æ‡•Ä‡§® ‡§ï‡•Ä ‡§™‡•à‡§¶‡§æ‡§á‡§∂ ‡§Æ‡•á‡§Ç ‡§î‡§∞ ‡§∞‡§æ‡§§-‡§¶‡§ø‡§® ‡§ï‡•á ‡§¨‡§¶‡§≤‡§®‡•á ‡§Æ‡•á‡§Ç ‡§Ö‡§ï‡§º‡•ç‡§≤ ‡§µ‡§æ‡§≤‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§®‡§ø‡§∂‡§æ‡§®‡§ø‡§Ø‡§æ‡§Å ‡§π‡•à‡§Ç‡•§ (‡§Ü‡§≤‡•á-‡§á‡§Æ‡§∞‡§æ‡§® 3:190)",
                    relatesTo: "Pondering Creation" 
                }
            },
            18: {
                tasks: [
                    { title: "Reflected on Fatiha and concentrated on it while praying", points: 10 },
                    { title: "Pondered on the things Allah created in the world and said SubhanAllah", points: 10 },
                    { title: "Made sincere dua for someone else", points: 10 },
                    { title: "Reflected on personal shortcomings in journal", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "ŸàŸéÿßŸÑŸéŸëÿ∞ŸêŸäŸÜŸé ÿ¨Ÿéÿßÿ°ŸèŸàÿß ŸÖŸêŸÜ ÿ®ŸéÿπŸíÿØŸêŸáŸêŸÖŸí ŸäŸéŸÇŸèŸàŸÑŸèŸàŸÜŸé ÿ±Ÿéÿ®ŸéŸëŸÜŸéÿß ÿßÿ∫ŸíŸÅŸêÿ±Ÿí ŸÑŸéŸÜŸéÿß ŸàŸéŸÑŸêÿ•ŸêÿÆŸíŸàŸéÿßŸÜŸêŸÜŸéÿß",
                    ayah: "And those who came after them say, 'Our Lord, forgive us and our brothers.' (Al-Hashr 59:10)",
                    ayahHindi: "‡§î‡§∞ ‡§µ‡•ã ‡§ú‡•ã ‡§â‡§®‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§Ü‡§è ‡§ï‡§π‡§§‡•á ‡§π‡•à‡§Ç, '‡§ê ‡§π‡§Æ‡§æ‡§∞‡•á ‡§∞‡§¨! ‡§π‡§Æ‡•á‡§Ç ‡§î‡§∞ ‡§π‡§Æ‡§æ‡§∞‡•á ‡§≠‡§æ‡§á‡§Ø‡•ã‡§Ç ‡§ï‡•ã ‡§Æ‡§æ‡§´‡§º ‡§ï‡§∞‡•§' (‡§Ö‡§≤-‡§π‡§∂‡•ç‡§∞ 59:10)",
                    relatesTo: "Dua for Others" 
                }
            },
            19: {
                tasks: [
                    { title: "Reflected on Fatiha and concentrated on it while praying", points: 10 },
                    { title: "Pondered on the things Allah created in the world and said SubhanAllah", points: 10 },
                    { title: "Made sincere dua for someone else", points: 10 },
                    { title: "Reflected on personal shortcomings in journal", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "ŸäŸéÿß ÿ£ŸéŸäŸèŸëŸáŸéÿß ÿßŸÑŸéŸëÿ∞ŸêŸäŸÜŸé ÿ¢ŸÖŸéŸÜŸèŸàÿß ÿ™ŸèŸàÿ®ŸèŸàÿß ÿ•ŸêŸÑŸéŸâ ÿßŸÑŸÑŸéŸëŸáŸê ÿ™ŸéŸàŸíÿ®Ÿéÿ©Ÿã ŸÜŸéŸëÿµŸèŸàÿ≠Ÿãÿß",
                    ayah: "O you who have believed, repent to Allah with sincere repentance. (At-Tahrim 66:8)",
                    ayahHindi: "‡§ê ‡§à‡§Æ‡§æ‡§® ‡§µ‡§æ‡§≤‡•ã! ‡§Ö‡§≤‡•ç‡§≤‡§æ‡§π ‡§∏‡•á ‡§∏‡§ö‡•ç‡§ö‡•Ä ‡§§‡•å‡§¨‡§æ ‡§ï‡§∞‡•ã‡•§ (‡§Ö‡§§-‡§§‡§π‡§∞‡•Ä‡§Æ 66:8)",
                    relatesTo: "Self-Reflection" 
                }
            },
            20: {
                tasks: [
                    { title: "Reflected on Fatiha and concentrated on it while praying", points: 10 },
                    { title: "Pondered on the things Allah created in the world and said SubhanAllah", points: 10 },
                    { title: "Made sincere dua for someone else", points: 10 },
                    { title: "Reflected on personal shortcomings in journal", points: 10 }
                ],
                quranTask: { 
                    title: "Reflective Day: Read the following ayah and assess your spiritual purification", 
                    points: 20,
                    arabic: "ŸÇŸéÿØŸí ÿ£ŸéŸÅŸíŸÑŸéÿ≠Ÿé ŸÖŸéŸÜ ÿ≤ŸéŸÉŸéŸëÿßŸáŸéÿß",
                    ayah: "He has succeeded who purifies himself. (Al-A'la 87:14)",
                    ayahHindi: "‡§¨‡•á‡§∂‡§ï ‡§ï‡§æ‡§Æ‡§Ø‡§æ‡§¨ ‡§π‡•Å‡§Ü ‡§ú‡§ø‡§∏‡§®‡•á ‡§Ö‡§™‡§®‡•á ‡§®‡§´‡§º‡•ç‡§∏ ‡§ï‡•ã ‡§™‡§æ‡§ï ‡§ï‡§ø‡§Ø‡§æ‡•§ (‡§Ö‡§≤-‡§Ü‡§≤‡§æ 87:14)",
                    relatesTo: "Stage Summary" 
                }
            },

            // Stage 5: Ihsan & Excellence (Days 21-25)
            21: {
                tasks: [
                    { title: "Thanked Allah for something small", points: 10 },
                    { title: "Left something that I can't do while fasting after breaking the fast too", points: 10 },
                    { title: "Gave charity (any amount)", points: 10 },
                    { title: "Helped someone without expectation of return", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "ŸàŸéÿ•Ÿêÿ∞Ÿí ÿ™Ÿéÿ£Ÿéÿ∞ŸéŸëŸÜŸé ÿ±Ÿéÿ®ŸèŸëŸÉŸèŸÖŸí ŸÑŸéÿ¶ŸêŸÜ ÿ¥ŸéŸÉŸéÿ±Ÿíÿ™ŸèŸÖŸí ŸÑŸéÿ£Ÿéÿ≤ŸêŸäÿØŸéŸÜŸéŸëŸÉŸèŸÖŸí",
                    ayah: "And [remember] when your Lord proclaimed, 'If you are grateful, I will surely increase you [in favor].' (Ibrahim 14:7)",
                    ayahHindi: "‡§î‡§∞ ‡§Ø‡§æ‡§¶ ‡§ï‡§∞‡•ã ‡§ú‡§¨ ‡§§‡•Å‡§Æ‡•ç‡§π‡§æ‡§∞‡•á ‡§∞‡§¨ ‡§®‡•á ‡§è‡§≤‡§æ‡§® ‡§ï‡§ø‡§Ø‡§æ, '‡§Ö‡§ó‡§∞ ‡§§‡•Å‡§Æ ‡§∂‡•Å‡§ï‡•ç‡§∞ ‡§Ö‡§¶‡§æ ‡§ï‡§∞‡•ã‡§ó‡•á ‡§§‡•ã ‡§Æ‡•à‡§Ç ‡§ú‡§º‡§∞‡•Ç‡§∞ ‡§§‡•Å‡§Æ‡•ç‡§π‡•á‡§Ç ‡§ú‡§º‡•ç‡§Ø‡§æ‡§¶‡§æ ‡§¶‡•Ç‡§Å‡§ó‡§æ‡•§' (‡§á‡§¨‡•ç‡§∞‡§æ‡§π‡•Ä‡§Æ 14:7)",
                    relatesTo: "Thanking Allah" 
                }
            },
            22: {
                tasks: [
                    { title: "Thanked Allah for something small", points: 10 },
                    { title: "Left something that I can't do while fasting after breaking the fast too", points: 10 },
                    { title: "Gave charity (any amount)", points: 10 },
                    { title: "Helped someone without expectation of return", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "ŸàŸéÿßÿπŸíÿ®ŸèÿØŸí ÿ±Ÿéÿ®ŸéŸëŸÉŸé ÿ≠Ÿéÿ™ŸéŸëŸâŸ∞ ŸäŸéÿ£Ÿíÿ™ŸêŸäŸéŸÉŸé ÿßŸÑŸíŸäŸéŸÇŸêŸäŸÜŸè",
                    ayah: "And worship your Lord until there comes to you the certainty [death]. (Al-Hijr 15:99)",
                    ayahHindi: "‡§î‡§∞ ‡§Ö‡§™‡§®‡•á ‡§∞‡§¨ ‡§ï‡•Ä ‡§á‡§¨‡§æ‡§¶‡§§ ‡§ï‡§∞‡•ã ‡§Ø‡§π‡§æ‡§Å ‡§§‡§ï ‡§ï‡§ø ‡§§‡•Å‡§Æ‡•ç‡§π‡•á‡§Ç ‡§Ø‡§ï‡§º‡•Ä‡§® (‡§Æ‡•å‡§§) ‡§Ü ‡§ú‡§æ‡§è‡•§ (‡§Ö‡§≤-‡§π‡§ø‡§ú‡•ç‡§∞ 15:99)",
                    relatesTo: "Continuity" 
                }
            },
            23: {
                tasks: [
                    { title: "Thanked Allah for something small", points: 10 },
                    { title: "Left something that I can't do while fasting after breaking the fast too", points: 10 },
                    { title: "Gave charity (any amount)", points: 10 },
                    { title: "Helped someone without expectation of return", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "ŸÖŸéÿ´ŸéŸÑŸè ÿßŸÑŸéŸëÿ∞ŸêŸäŸÜŸé ŸäŸèŸÜŸÅŸêŸÇŸèŸàŸÜŸé ÿ£ŸéŸÖŸíŸàŸéÿßŸÑŸéŸáŸèŸÖŸí ŸÅŸêŸä ÿ≥Ÿéÿ®ŸêŸäŸÑŸê ÿßŸÑŸÑŸéŸëŸáŸê ŸÉŸéŸÖŸéÿ´ŸéŸÑŸê ÿ≠Ÿéÿ®ŸéŸëÿ©Ÿç ÿ£ŸéŸÜÿ®Ÿéÿ™Ÿéÿ™Ÿí ÿ≥Ÿéÿ®ŸíÿπŸé ÿ≥ŸéŸÜŸéÿßÿ®ŸêŸÑŸé",
                    ayah: "The example of those who spend their wealth in the way of Allah is like a seed which grows seven spikes. (Al-Baqarah 2:261)",
                    ayahHindi: "‡§ú‡•ã ‡§≤‡•ã‡§ó ‡§Ö‡§≤‡•ç‡§≤‡§æ‡§π ‡§ï‡•Ä ‡§∞‡§æ‡§π ‡§Æ‡•á‡§Ç ‡§Ö‡§™‡§®‡§æ ‡§Æ‡§æ‡§≤ ‡§ñ‡§º‡§∞‡•ç‡§ö ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç ‡§â‡§®‡§ï‡•Ä ‡§Æ‡§ø‡§∏‡§æ‡§≤ ‡§ê‡§∏‡•Ä ‡§π‡•à ‡§ú‡•à‡§∏‡•á ‡§è‡§ï ‡§¶‡§æ‡§®‡§æ ‡§ú‡§ø‡§∏‡§∏‡•á ‡§∏‡§æ‡§§ ‡§¨‡§æ‡§≤‡§ø‡§Ø‡§æ‡§Å ‡§â‡§ó‡•Ä‡§Ç‡•§ (‡§Ö‡§≤-‡§¨‡§ï‡§º‡§∞‡§π 2:261)",
                    relatesTo: "Charity" 
                }
            },
            24: {
                tasks: [
                    { title: "Thanked Allah for something small", points: 10 },
                    { title: "Left something that I can't do while fasting after breaking the fast too", points: 10 },
                    { title: "Gave charity (any amount)", points: 10 },
                    { title: "Helped someone without expectation of return", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "ÿ•ŸêŸÜŸéŸëŸÖŸéÿß ŸÜŸèÿ∑ŸíÿπŸêŸÖŸèŸÉŸèŸÖŸí ŸÑŸêŸàŸéÿ¨ŸíŸáŸê ÿßŸÑŸÑŸéŸëŸáŸê ŸÑŸéÿß ŸÜŸèÿ±ŸêŸäÿØŸè ŸÖŸêŸÜŸÉŸèŸÖŸí ÿ¨Ÿéÿ≤Ÿéÿßÿ°Ÿã ŸàŸéŸÑŸéÿß ÿ¥ŸèŸÉŸèŸàÿ±Ÿãÿß",
                    ayah: "We feed you only for the countenance of Allah. We wish not from you reward or gratitude. (Al-Insan 76:9)",
                    ayahHindi: "‡§π‡§Æ ‡§§‡•Å‡§Æ‡•ç‡§π‡•á‡§Ç ‡§∏‡§ø‡§∞‡•ç‡§´‡§º ‡§Ö‡§≤‡•ç‡§≤‡§æ‡§π ‡§ï‡•Ä ‡§ñ‡§º‡§æ‡§§‡§ø‡§∞ ‡§ñ‡§æ‡§®‡§æ ‡§ñ‡§ø‡§≤‡§æ‡§§‡•á ‡§π‡•à‡§Ç‡•§ ‡§π‡§Æ ‡§§‡•Å‡§Æ‡§∏‡•á ‡§® ‡§¨‡§¶‡§≤‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç ‡§® ‡§∂‡•Å‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ‡•§ (‡§Ö‡§≤-‡§á‡§Ç‡§∏‡§æ‡§® 76:9)",
                    relatesTo: "Helping Others" 
                }
            },
            25: {
                tasks: [
                    { title: "Thanked Allah for something small", points: 10 },
                    { title: "Left something that I can't do while fasting after breaking the fast too", points: 10 },
                    { title: "Gave charity (any amount)", points: 10 },
                    { title: "Helped someone without expectation of return", points: 10 }
                ],
                quranTask: { 
                    title: "Reflective Day: Read the following ayah and reflect on striving for excellence", 
                    points: 20,
                    arabic: "ŸàŸéÿßŸÑŸéŸëÿ∞ŸêŸäŸÜŸé ÿ¨ŸéÿßŸáŸéÿØŸèŸàÿß ŸÅŸêŸäŸÜŸéÿß ŸÑŸéŸÜŸéŸáŸíÿØŸêŸäŸéŸÜŸéŸëŸáŸèŸÖŸí ÿ≥Ÿèÿ®ŸèŸÑŸéŸÜŸéÿß",
                    ayah: "And those who strive for Us - We will surely guide them to Our ways. (Al-Ankabut 29:69)",
                    ayahHindi: "‡§î‡§∞ ‡§ú‡•ã ‡§≤‡•ã‡§ó ‡§π‡§Æ‡§æ‡§∞‡•á ‡§≤‡§ø‡§è ‡§ï‡•ã‡§∂‡§ø‡§∂ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç - ‡§π‡§Æ ‡§ú‡§º‡§∞‡•Ç‡§∞ ‡§â‡§®‡•ç‡§π‡•á‡§Ç ‡§Ö‡§™‡§®‡•á ‡§∞‡§æ‡§∏‡•ç‡§§‡•ã‡§Ç ‡§ï‡•Ä ‡§π‡§ø‡§¶‡§æ‡§Ø‡§§ ‡§¶‡•á‡§Ç‡§ó‡•á‡•§ (‡§Ö‡§≤-‡§Ö‡§®‡§ï‡§¨‡•Ç‡§§ 29:69)",
                    relatesTo: "Stage Summary" 
                }
            },

            // Stage 6: Transformation & Continuity (Days 26-30)
            26: {
                tasks: [
                    { title: "Learned and reflected on first 10 ayahs of Surah Al-Kahf", points: 10 },
                    { title: "Did one good deed quietly", points: 10 },
                    { title: "Planned one good deed to continue after Ramadan", points: 10 },
                    { title: "Taught someone a beneficial Islamic knowledge", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "ÿßŸÑŸíÿ≠ŸéŸÖŸíÿØŸè ŸÑŸêŸÑŸéŸëŸáŸê ÿßŸÑŸéŸëÿ∞ŸêŸä ÿ£ŸéŸÜÿ≤ŸéŸÑŸé ÿπŸéŸÑŸéŸâŸ∞ ÿπŸéÿ®ŸíÿØŸêŸáŸê ÿßŸÑŸíŸÉŸêÿ™Ÿéÿßÿ®Ÿé ŸàŸéŸÑŸéŸÖŸí ŸäŸéÿ¨ŸíÿπŸéŸÑ ŸÑŸéŸëŸáŸè ÿπŸêŸàŸéÿ¨Ÿãÿß",
                    ayah: "All praise is due to Allah, who has sent down upon His Servant the Book and has not made therein any deviance. (Al-Kahf 18:1)",
                    ayahHindi: "‡§§‡§Æ‡§æ‡§Æ ‡§§‡§æ‡§∞‡•Ä‡§´‡§º ‡§Ö‡§≤‡•ç‡§≤‡§æ‡§π ‡§ï‡•á ‡§≤‡§ø‡§è ‡§π‡•à ‡§ú‡§ø‡§∏‡§®‡•á ‡§Ö‡§™‡§®‡•á ‡§¨‡§Ç‡§¶‡•á ‡§™‡§∞ ‡§ï‡§ø‡§§‡§æ‡§¨ ‡§®‡§æ‡§ú‡§º‡§ø‡§≤ ‡§ï‡•Ä ‡§î‡§∞ ‡§â‡§∏‡§Æ‡•á‡§Ç ‡§ï‡•ã‡§à ‡§ü‡•á‡§¢‡§º‡§æ‡§™‡§® ‡§®‡§π‡•Ä‡§Ç ‡§∞‡§ñ‡§æ‡•§ (‡§Ö‡§≤-‡§ï‡§π‡§´‡§º 18:1)",
                    relatesTo: "Surah Al-Kahf" 
                }
            },
            27: {
                tasks: [
                    { title: "Learned and reflected on first 10 ayahs of Surah Al-Kahf", points: 10 },
                    { title: "Did one good deed quietly", points: 10 },
                    { title: "Planned one good deed to continue after Ramadan", points: 10 },
                    { title: "Taught someone a beneficial Islamic knowledge", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "ÿßŸÑŸéŸëÿ∞ŸêŸäŸÜŸé ŸäŸèŸÜŸÅŸêŸÇŸèŸàŸÜŸé ÿ£ŸéŸÖŸíŸàŸéÿßŸÑŸéŸáŸèŸÖ ÿ®ŸêÿßŸÑŸÑŸéŸëŸäŸíŸÑŸê ŸàŸéÿßŸÑŸÜŸéŸëŸáŸéÿßÿ±Ÿê ÿ≥Ÿêÿ±ŸãŸëÿß ŸàŸéÿπŸéŸÑŸéÿßŸÜŸêŸäŸéÿ©Ÿã",
                    ayah: "Those who spend their wealth by night and day, secretly and publicly. (Al-Baqarah 2:274)",
                    ayahHindi: "‡§µ‡•ã ‡§ú‡•ã ‡§Ö‡§™‡§®‡§æ ‡§Æ‡§æ‡§≤ ‡§∞‡§æ‡§§ ‡§î‡§∞ ‡§¶‡§ø‡§®, ‡§õ‡•Å‡§™‡•á ‡§î‡§∞ ‡§ñ‡•Å‡§≤‡•á ‡§Æ‡•á‡§Ç ‡§ñ‡§º‡§∞‡•ç‡§ö ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç‡•§ (‡§Ö‡§≤-‡§¨‡§ï‡§º‡§∞‡§π 2:274)",
                    relatesTo: "Secret Good Deeds" 
                }
            },
            28: {
                tasks: [
                    { title: "Learned and reflected on first 10 ayahs of Surah Al-Kahf", points: 10 },
                    { title: "Did one good deed quietly", points: 10 },
                    { title: "Planned one good deed to continue after Ramadan", points: 10 },
                    { title: "Taught someone a beneficial Islamic knowledge", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "ÿ•ŸêŸÜŸéŸë ÿ£Ÿéÿ≠Ÿéÿ®ŸéŸë ÿßŸÑŸíÿ£ŸéÿπŸíŸÖŸéÿßŸÑŸê ÿ•ŸêŸÑŸéŸâ ÿßŸÑŸÑŸéŸëŸáŸê ÿ£ŸéÿØŸíŸàŸéŸÖŸèŸáŸéÿß ŸàŸéÿ•ŸêŸÜŸí ŸÇŸéŸÑŸéŸë",
                    ayah: "Indeed, the most beloved of deeds to Allah are those that are consistent, even if small. (Hadith - Bukhari)",
                    ayahHindi: "‡§¨‡•á‡§∂‡§ï ‡§Ö‡§≤‡•ç‡§≤‡§æ‡§π ‡§ï‡•ã ‡§∏‡§¨‡§∏‡•á ‡§™‡§∏‡§Ç‡§¶‡•Ä‡§¶‡§æ ‡§Ü‡§Æ‡§æ‡§≤ ‡§µ‡•ã ‡§π‡•à‡§Ç ‡§ú‡•ã ‡§Æ‡•Å‡§∏‡§≤‡§∏‡§≤ ‡§π‡•ã‡§Ç, ‡§ö‡§æ‡§π‡•á ‡§õ‡•ã‡§ü‡•á ‡§π‡•Ä ‡§ï‡•ç‡§Ø‡•ã‡§Ç ‡§® ‡§π‡•ã‡§Ç‡•§ (‡§π‡§¶‡•Ä‡§∏ - ‡§¨‡•Å‡§ñ‡§º‡§æ‡§∞‡•Ä)",
                    relatesTo: "Planning Continuity" 
                }
            },
            29: {
                tasks: [
                    { title: "Learned and reflected on first 10 ayahs of Surah Al-Kahf", points: 10 },
                    { title: "Did one good deed quietly", points: 10 },
                    { title: "Planned one good deed to continue after Ramadan", points: 10 },
                    { title: "Taught someone a beneficial Islamic knowledge", points: 10 }
                ],
                quranTask: { 
                    title: "Read the following ayah with translation and reflect about it", 
                    points: 20,
                    arabic: "ŸàŸéÿ∞ŸéŸÉŸêŸëÿ±Ÿí ŸÅŸéÿ•ŸêŸÜŸéŸë ÿßŸÑÿ∞ŸêŸëŸÉŸíÿ±ŸéŸâŸ∞ ÿ™ŸéŸÜŸÅŸéÿπŸè ÿßŸÑŸíŸÖŸèÿ§ŸíŸÖŸêŸÜŸêŸäŸÜŸé",
                    ayah: "And remind, for indeed, the reminder benefits the believers. (Adh-Dhariyat 51:55)",
                    ayahHindi: "‡§î‡§∞ ‡§Ø‡§æ‡§¶ ‡§¶‡§ø‡§≤‡§æ‡§ì, ‡§ï‡•ç‡§Ø‡•ã‡§Ç‡§ï‡§ø ‡§Ø‡§æ‡§¶ ‡§¶‡§ø‡§≤‡§æ‡§®‡§æ ‡§Æ‡•ã‡§Æ‡§ø‡§®‡•ã‡§Ç ‡§ï‡•ã ‡§´‡§º‡§æ‡§Ø‡§¶‡§æ ‡§™‡§π‡•Å‡§Å‡§ö‡§æ‡§§‡§æ ‡§π‡•à‡•§ (‡§Ö‡§ß-‡§ß‡§æ‡§∞‡§ø‡§Ø‡§æ‡§§ 51:55)",
                    relatesTo: "Teaching Knowledge" 
                }
            },
            30: {
                tasks: [
                    { title: "Learned and reflected on first 10 ayahs of Surah Al-Kahf", points: 10 },
                    { title: "Did one good deed quietly", points: 10 },
                    { title: "Planned one good deed to continue after Ramadan", points: 10 },
                    { title: "Taught someone a beneficial Islamic knowledge", points: 10 }
                ],
                quranTask: { 
                    title: "Final Reflection: Read the following ayah and reflect on your complete transformation journey", 
                    points: 20,
                    arabic: "ÿ•ŸêŸÜŸéŸë ÿßŸÑŸÑŸéŸëŸáŸé ŸÑŸéÿß ŸäŸèÿ∫ŸéŸäŸêŸëÿ±Ÿè ŸÖŸéÿß ÿ®ŸêŸÇŸéŸàŸíŸÖŸç ÿ≠Ÿéÿ™ŸéŸëŸâŸ∞ ŸäŸèÿ∫ŸéŸäŸêŸëÿ±ŸèŸàÿß ŸÖŸéÿß ÿ®Ÿêÿ£ŸéŸÜŸÅŸèÿ≥ŸêŸáŸêŸÖŸí",
                    ayah: "Indeed, Allah will not change the condition of a people until they change what is in themselves. (Ar-Ra'd 13:11)",
                    ayahHindi: "‡§¨‡•á‡§∂‡§ï ‡§Ö‡§≤‡•ç‡§≤‡§æ‡§π ‡§ï‡§ø‡§∏‡•Ä ‡§ï‡§º‡•å‡§Æ ‡§ï‡•Ä ‡§π‡§æ‡§≤‡§§ ‡§ï‡•ã ‡§®‡§π‡•Ä‡§Ç ‡§¨‡§¶‡§≤‡§§‡§æ ‡§ú‡§¨ ‡§§‡§ï ‡§µ‡•ã ‡§Ö‡§™‡§®‡•Ä ‡§π‡§æ‡§≤‡§§ ‡§® ‡§¨‡§¶‡§≤‡•á‡§Ç‡•§ (‡§Ö‡§∞-‡§∞‡§Ö‡§¶ 13:11)",
                    relatesTo: "Stage Summary" 
                }
            }
        };


        // State management
        let userData = {
            name: '',
            mobile: '',
            completedDays: {},
            totalPoints: 0,
            currentStreak: 0,
            lastCompletedDay: 0
        };

        // Initialize app
        function init() {
            console.log('App initializing...');
            loadUserData();
            console.log('User data loaded:', userData);
            
            // Initialize testing day if in testing mode
            if (TESTING_MODE && !userData.testingDay) {
                userData.testingDay = 1;
                saveUserData();
            }
            
            // Set up login form event listener
            const loginForm = document.getElementById('loginForm');
            if (loginForm) {
                console.log('Login form found, adding event listener');
                loginForm.addEventListener('submit', function(e) {
                    console.log('Form submitted!');
                    e.preventDefault();
                    const name = document.getElementById('userName').value.trim();
                    const mobile = document.getElementById('userMobile').value.trim();
                    
                    console.log('Name:', name, 'Mobile:', mobile);
                    
                    if (name && mobile) {
                        userData.name = name;
                        userData.mobile = mobile;
                        saveUserData();
                        console.log('Showing app...');
                        showApp();
                    } else {
                        alert('Please enter both name and mobile number');
                    }
                });
            } else {
                console.error('Login form not found!');
            }
            
            // Close modal on Escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    closeModal();
                }
            });
            
            if (userData.mobile) {
                console.log('User already logged in, showing app');
                showApp();
            } else {
                console.log('No user data, showing login');
                showLogin();
            }
            
            // Generate animated stars
            generateStars();
        }
        
        // Generate animated stars background
        function generateStars() {
            const starsContainer = document.getElementById('starsContainer');
            if (!starsContainer) return;
            
            const numberOfStars = 100;
            for (let i = 0; i < numberOfStars; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 4 + 's';
                star.style.animationDuration = (3 + Math.random() * 3) + 's';
                starsContainer.appendChild(star);
            }
        }

        // Testing Mode Functions
        function nextDay() {
            if (!TESTING_MODE) return;
            const currentDay = userData.testingDay || 1;
            if (currentDay < 30) {
                userData.testingDay = currentDay + 1;
                saveUserData();
                updateUI();
            } else {
                alert('Already at Day 30!');
            }
        }

        function previousDay() {
            if (!TESTING_MODE) return;
            const currentDay = userData.testingDay || 1;
            if (currentDay > 1) {
                userData.testingDay = currentDay - 1;
                saveUserData();
                updateUI();
            } else {
                alert('Already at Day 1!');
            }
        }

        function skipToDay() {
            if (!TESTING_MODE) return;
            const day = prompt('Enter day number (1-30):');
            const dayNum = parseInt(day);
            if (dayNum >= 1 && dayNum <= 30) {
                userData.testingDay = dayNum;
                saveUserData();
                updateUI();
            } else {
                alert('Please enter a valid day between 1 and 30');
            }
        }

        function resetProgress() {
            if (!TESTING_MODE) return;
            if (confirm('Are you sure you want to reset ALL progress? This will clear all completed days and points.')) {
                userData.completedDays = {};
                userData.totalPoints = 0;
                userData.currentStreak = 0;
                userData.lastCompletedDay = 0;
                userData.testingDay = 1;
                saveUserData();
                updateUI();
                alert('Progress reset! Starting fresh from Day 1.');
            }
        }

        function showLogin() {
            document.getElementById('loginScreen').classList.remove('hidden');
            document.getElementById('appScreen').classList.add('hidden');
        }

        function showApp() {
            document.getElementById('loginScreen').classList.add('hidden');
            document.getElementById('appScreen').classList.remove('hidden');
            document.getElementById('userNameDisplay').textContent = userData.name;
            
            // Initialize language button text
            updateLanguageButton();
            
            updateUI();
        }
        
        function updateLanguageButton() {
            // Update toggle switch active state
            const langEn = document.getElementById('lang-en');
            const langHi = document.getElementById('lang-hi');
            if (langEn && langHi) {
                langEn.classList.toggle('active', currentLanguage === 'en');
                langHi.classList.toggle('active', currentLanguage === 'hi');
                console.log('Language toggle updated. Current language:', currentLanguage);
            } else {
                console.log('Language toggle elements not found!');
            }
        }

        // Calculate current day (1-30)
        function getCurrentDay() {
            if (TESTING_MODE) {
                // In testing mode, use manual day counter
                return userData.testingDay || 1;
            }
            
            // Production mode - calculate based on Ramadan start date
            const today = new Date();
            const ramadanStart = new Date('2026-02-14'); // Update this to actual Ramadan start date
            const diffTime = Math.abs(today - ramadanStart);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            return Math.min(Math.max(1, diffDays), 30);
        }

        // Get current stage
        function getCurrentStage(day) {
            return STAGES.find(stage => stage.days.includes(day));
        }

        // Update UI
        function updateUI() {
            const currentDay = getCurrentDay();
            const stage = getCurrentStage(currentDay);
            
            // Show/hide testing navigation
            const testingNav = document.getElementById('testingNav');
            if (testingNav) {
                if (TESTING_MODE) {
                    testingNav.classList.remove('hidden');
                } else {
                    testingNav.classList.add('hidden');
                }
            }
            
            // Update header
            const translatedStageName = translate(stage.name);
            const daysText = currentLanguage === 'en' ? 'Days' : '‡§¶‡§ø‡§®';
            document.getElementById('stageTitle').innerHTML = `
                Stage ${STAGES.indexOf(stage) + 1}: ${translatedStageName}<br>
                <small style="opacity: 0.8;">${daysText} ${stage.days[0]} - ${stage.days[stage.days.length - 1]}</small>
            `;
            
            // Update stats
            document.getElementById('totalPoints').textContent = userData.totalPoints;
            document.getElementById('currentDay').textContent = currentDay;
            document.getElementById('streakCount').textContent = userData.currentStreak;
            
            // Update progress
            const progress = (currentDay / 30) * 100;
            document.getElementById('progressPercent').textContent = `${Math.round(progress)}%`;
            document.getElementById('progressFill').style.width = `${progress}%`;
            
            // Check if day already completed
            if (userData.completedDays[currentDay]) {
                showCompletionMessage();
            } else {
                loadTasks(currentDay);
            }

            // Check if challenge is complete
            if (currentDay > 30 || Object.keys(userData.completedDays).length === 30) {
                showChallengeComplete();
            }

            // Show streak badge if applicable
            updateStreakBadge();
        }

        function loadTasks(day) {
            const dayData = TASKS_DATA[day];
            if (!dayData) return;

            document.getElementById('dayNumber').textContent = day;
            document.getElementById('completionMessage').classList.add('hidden');
            document.getElementById('tasksContainer').classList.remove('hidden');

            const tasksList = document.getElementById('tasksList');
            tasksList.innerHTML = '';

            // Add regular tasks
            dayData.tasks.forEach((task, index) => {
                const taskEl = createTaskElement(task, `task-${index}`);
                tasksList.appendChild(taskEl);
            });

            // Add Quran task
            const quranTaskEl = createTaskElement(dayData.quranTask, 'quran-task', true);
            tasksList.appendChild(quranTaskEl);
        }

        function createTaskElement(task, id, isQuranTask = false) {
            const div = document.createElement('div');
            div.className = 'task-item';
            
            // Store task data for modal
            div.dataset.taskId = id;
            div.dataset.taskData = JSON.stringify(task);
            
            const translatedTitle = translate(task.title);
            const pointsText = currentLanguage === 'en' ? 'pts' : '‡§Ö‡§Ç‡§ï';
            
            // Only Quran task (5th task) opens modal, others just tick
            const contentClickHandler = isQuranTask ? `onclick="openTaskModal('${id}')"` : '';
            
            // For Quran task: show Arabic if available, otherwise show translation as fallback
            let ayahDisplay = '';
            if (isQuranTask) {
                if (task.arabic) {
                    ayahDisplay = `<div class="task-ayah">${task.arabic}</div>`;
                } else if (task.ayah) {
                    // Fallback for days without Arabic text yet
                    ayahDisplay = `<div class="task-ayah">${task.ayah}</div>`;
                }
            }
            
            div.innerHTML = `
                <div class="task-checkbox" id="${id}" onclick="event.stopPropagation(); toggleTask('${id}')"></div>
                <div class="task-content" ${contentClickHandler}>
                    <div class="task-title">${translatedTitle}</div>
                    ${ayahDisplay}
                </div>
                <div class="task-points">+${task.points} ${pointsText}</div>
            `;
            return div;
        }

        function toggleTask(taskId) {
            const checkbox = document.getElementById(taskId);
            checkbox.classList.toggle('checked');
            checkbox.closest('.task-item').classList.toggle('completed');
        }

        // Modal Functions
        let currentModalTaskId = null;

        function openTaskModal(taskId) {
            const taskElement = document.querySelector(`[data-task-id="${taskId}"]`);
            if (!taskElement) return;
            
            const taskData = JSON.parse(taskElement.dataset.taskData);
            currentModalTaskId = taskId;
            
            // Populate modal with translated content
            const translatedTitle = translate(taskData.title);
            const pointsText = currentLanguage === 'en' ? 'points' : '‡§Ö‡§Ç‡§ï';
            document.getElementById('modalTaskTitle').textContent = translatedTitle;
            document.getElementById('modalPoints').textContent = `+${taskData.points} ${pointsText}`;
            
            // Show Arabic text if available
            const arabicEl = document.getElementById('modalArabic');
            if (taskData.arabic) {
                arabicEl.textContent = taskData.arabic;
                arabicEl.style.display = 'block';
            } else {
                arabicEl.style.display = 'none';
            }
            
            // Show translation based on selected language
            const translationEl = document.getElementById('modalTranslation');
            if (currentLanguage === 'hi' && taskData.ayahHindi) {
                translationEl.textContent = taskData.ayahHindi;
                translationEl.style.display = 'block';
            } else if (taskData.ayah) {
                translationEl.textContent = taskData.ayah;
                translationEl.style.display = 'block';
            } else {
                translationEl.style.display = 'none';
            }
            
            // Sync checkbox state
            const checkbox = document.getElementById(taskId);
            const modalCheckbox = document.getElementById('modalCheckbox');
            if (checkbox && checkbox.classList.contains('checked')) {
                modalCheckbox.classList.add('checked');
            } else {
                modalCheckbox.classList.remove('checked');
            }
            
            // Show modal
            document.getElementById('taskModal').classList.remove('hidden');
            document.body.style.overflow = 'hidden'; // Prevent background scroll
        }

        function closeModal(event) {
            // Close if clicking overlay or close button
            if (!event || event.target.classList.contains('modal-overlay') || event.type === 'click') {
                document.getElementById('taskModal').classList.add('hidden');
                document.body.style.overflow = 'auto';
                currentModalTaskId = null;
            }
        }

        function toggleModalCheckbox() {
            if (!currentModalTaskId) return;
            
            const modalCheckbox = document.getElementById('modalCheckbox');
            const taskCheckbox = document.getElementById(currentModalTaskId);
            
            // Toggle both checkboxes
            modalCheckbox.classList.toggle('checked');
            
            if (taskCheckbox) {
                if (modalCheckbox.classList.contains('checked')) {
                    taskCheckbox.classList.add('checked');
                    taskCheckbox.closest('.task-item').classList.add('completed');
                } else {
                    taskCheckbox.classList.remove('checked');
                    taskCheckbox.closest('.task-item').classList.remove('completed');
                }
            }
        }

        function submitTasks() {
            const currentDay = getCurrentDay();
            const dayData = TASKS_DATA[currentDay];
            
            // In testing mode, allow resubmission
            if (TESTING_MODE && userData.completedDays[currentDay]) {
                if (!confirm('This day is already completed. Re-submit and update points?')) {
                    return;
                }
                // Subtract previous points
                const previousPoints = userData.completedDays[currentDay].points;
                userData.totalPoints -= previousPoints;
            }
            
            // Count completed tasks
            let completedCount = 0;
            let earnedPoints = 0;

            // Check regular tasks
            dayData.tasks.forEach((task, index) => {
                const checkbox = document.getElementById(`task-${index}`);
                if (checkbox && checkbox.classList.contains('checked')) {
                    completedCount++;
                    earnedPoints += task.points;
                }
            });

            // Check Quran task
            const quranCheckbox = document.getElementById('quran-task');
            if (quranCheckbox && quranCheckbox.classList.contains('checked')) {
                completedCount++;
                earnedPoints += dayData.quranTask.points;
            }

            if (completedCount === 0) {
                alert('Please complete at least one task before submitting.');
                return;
            }

            // Calculate streak
            let newStreak = 1;
            if (userData.lastCompletedDay === currentDay - 1) {
                newStreak = userData.currentStreak + 1;
            }

            // Award streak bonus every 5 days
            let streakBonus = 0;
            if (newStreak % 5 === 0) {
                streakBonus = 50;
                earnedPoints += streakBonus;
            }

            // Update user data
            userData.completedDays[currentDay] = {
                tasks: completedCount,
                points: earnedPoints,
                timestamp: new Date().toISOString()
            };
            userData.totalPoints += earnedPoints;
            userData.currentStreak = newStreak;
            userData.lastCompletedDay = currentDay;

            saveUserData();
            sendToGoogleSheets(currentDay, completedCount, earnedPoints, streakBonus);
            showCompletionMessage(earnedPoints, streakBonus);
        }

        function showCompletionMessage(points, streakBonus) {
            document.getElementById('tasksContainer').classList.add('hidden');
            const completionMsg = document.getElementById('completionMessage');
            completionMsg.classList.remove('hidden');
            
            if (streakBonus > 0) {
                completionMsg.innerHTML = `
                    <h2>‚ú® Alhamdulillah!</h2>
                    <p>You've completed today's tasks!</p>
                    <p style="margin-top: 10px; font-size: 18px; font-weight: 600;">
                        +${points} points (including ${streakBonus} streak bonus!)
                    </p>
                `;
            }

            updateUI();
        }

        function updateStreakBadge() {
            const badge = document.getElementById('streakBadge');
            const streak = userData.currentStreak;

            if (streak >= 5) {
                badge.classList.remove('hidden');
                const nextMilestone = Math.ceil(streak / 5) * 5;
                const daysToGo = nextMilestone - streak;
                
                if (daysToGo === 0) {
                    badge.querySelector('.text').textContent = `${streak}-Day Streak! You earned 50 bonus points!`;
                } else {
                    badge.querySelector('.text').textContent = `${streak}-Day Streak! ${daysToGo} more day${daysToGo > 1 ? 's' : ''} for bonus points!`;
                }
            } else if (streak > 0) {
                badge.classList.remove('hidden');
                badge.querySelector('.text').textContent = `${streak}-Day Streak! Keep it up!`;
            } else {
                badge.classList.add('hidden');
            }
        }

        function showChallengeComplete() {
            const completeDiv = document.getElementById('challengeComplete');
            completeDiv.classList.remove('hidden');
            document.getElementById('finalScore').textContent = userData.totalPoints;
            document.getElementById('tasksContainer').classList.add('hidden');
        }

        // Local storage functions
        function saveUserData() {
            localStorage.setItem('ramadanChallengeUser', JSON.stringify(userData));
        }

        function loadUserData() {
            const saved = localStorage.getItem('ramadanChallengeUser');
            if (saved) {
                userData = JSON.parse(saved);
            }
        }

        function logout() {
            if (confirm('Are you sure you want to logout? Your data will be saved.')) {
                showLogin();
            }
        }

        // Google Sheets integration
        function sendToGoogleSheets(day, tasksCompleted, points, streakBonus) {
            // Skip if URL is not set
            if (!SHEET_URL || SHEET_URL === 'YOUR_GOOGLE_APPS_SCRIPT_URL_HERE') {
                console.log('Google Sheets URL not configured, skipping.');
                return;
            }

            const data = {
                action: 'submitProgress',
                timestamp: new Date().toISOString(),
                name: userData.name,
                mobile: userData.mobile,
                day: day,
                stage: getCurrentStage(day).name,
                tasksCompleted: tasksCompleted,
                points: points,
                streakBonus: streakBonus,
                totalPoints: userData.totalPoints,
                currentStreak: userData.currentStreak
            };

            console.log('Sending to Google Sheets:', data);

            fetch(SHEET_URL, {
                method: 'POST',
                mode: 'no-cors',
                headers: {
                    'Content-Type': 'text/plain',
                },
                body: JSON.stringify(data)
            })
            .then(() => console.log('Data sent to Google Sheets successfully.'))
            .catch(error => console.error('Error sending to Google Sheets:', error));
        }

        // Initialize on page load
        window.onload = init;
    </script>
</body>
</html>
